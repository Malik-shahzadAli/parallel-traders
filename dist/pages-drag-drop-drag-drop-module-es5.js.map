{"version":3,"sources":["webpack:///node_modules/atoa/atoa.js","webpack:///node_modules/contra/debounce.js","webpack:///node_modules/contra/emitter.js","webpack:///node_modules/crossvent/src/crossvent.js","webpack:///node_modules/crossvent/src/eventmap.js","webpack:///node_modules/custom-event/index.js","webpack:///node_modules/dragula/classes.js","webpack:///node_modules/dragula/dragula.js","webpack:///node_modules/ng2-dragula/__ivy_ngcc__/dist/fesm2015/ng2-dragula.js","webpack:///node_modules/ticky/ticky-browser.js","webpack:///src/app/pages/drag-drop/drag-drop.component.ts","webpack:///src/app/pages/drag-drop/drag-drop.component.html","webpack:///src/app/pages/drag-drop/drag-drop.module.ts"],"names":["module","exports","atoa","a","n","Array","prototype","slice","call","ticky","debounce","fn","args","ctx","run","apply","emitter","thing","options","opts","evt","undefined","on","type","push","once","_once","off","c","arguments","length","et","splice","indexOf","emit","emitterSnapshot","shift","throws","forEach","listen","async","customEvent","eventmap","doc","global","document","addEvent","addEventEasy","removeEvent","removeEventEasy","hardCache","addEventListener","addEventHard","removeEventHard","add","remove","fabricate","fabricateEvent","el","capturing","attachEvent","wrap","removeEventListener","listener","unwrap","detachEvent","model","e","makeCustomEvent","makeClassicEvent","dispatchEvent","fireEvent","createEvent","initEvent","createEventObject","detail","wrapperFactory","wrapper","originalEvent","event","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","element","i","find","item","eventname","ron","test","NativeCustomEvent","CustomEvent","useNative","p","foo","params","initCustomEvent","bubbles","cancelable","Boolean","cache","start","end","lookupClass","className","cached","lastIndex","RegExp","addClass","current","rmClass","replace","trim","rm","crossvent","classes","documentElement","dragula","initialContainers","len","isArray","_mirror","_source","_item","_offsetX","_offsetY","_moveX","_moveY","_initialSibling","_currentSibling","_copy","_renderTimer","_lastDropTarget","_grabbed","o","moves","always","accepts","invalid","invalidTarget","containers","isContainer","never","copy","copySortSource","revertOnSpill","removeOnSpill","direction","ignoreInputTextSelection","mirrorContainer","body","drake","manualStart","cancel","destroy","canMove","dragging","spillOver","spillOut","events","op","touchy","grab","release","eventualMovements","startBecauseMouseMoved","movements","preventGrabbed","clientX","clientY","ignore","whichMouseButton","metaKey","ctrlKey","context","canStart","isInput","focus","getCoord","elementBehindCursor","elementFromPoint","grabbed","offset","getOffset","left","top","renderMirrorImage","drag","handle","getParent","source","movable","nextEl","isCopy","cloneNode","drop","ungrab","getElementBehindPoint","dropTarget","findDropTarget","parent","removeChild","isInitialPlacement","cleanup","revert","reverts","initial","insertBefore","removeMirrorImage","clearTimeout","s","sibling","accepted","droppable","immediate","getImmediateChild","reference","getReference","x","y","style","changed","out","over","moved","rect","getBoundingClientRect","width","getRectWidth","height","getRectHeight","appendChild","horizontal","inside","outside","children","resolve","after","container","touch","mouseup","mousedown","mousemove","pointers","microsoft","navigator","pointerEnabled","msPointerEnabled","touches","buttons","button","getScroll","scrollProp","offsetProp","clientHeight","point","state","right","bottom","parentNode","tagName","isEditable","contentEditable","nextElementSibling","manually","nextSibling","nodeType","getEventHost","targetTouches","changedTouches","coord","host","missMap","pageX","pageY","Group","name","initEvents","EventTypes","Cancel","Cloned","Drag","DragEnd","Drop","Out","Over","Remove","Shadow","DropModel","RemoveModel","AllEvents","Object","keys","map","k","DrakeFactory","build","filterEvent","eventType","filterDragType","projector","input","pipe","elContainerSourceProjector","DragulaService","drakeFactory","dispatch$","groupName","dragend","elContainerSource","shadow","cloned","clone","original","cloneType","dropModel","sourceModel","targetModel","sourceIndex","targetIndex","removeModel","groups","group","existingGroup","Error","handleModels","setupEvents","dragElm","dragIndex","dropIndex","models","next","domIndexOf","dropElm","isCopying","copyItem","child","ɵfac","DragulaService_Factory","t","ɵprov","token","factory","ctorParameters","decorators","DragulaDirective","dragulaService","dragulaModelChange","changes","prev","previousValue","currentValue","firstChange","hadPreviousValue","hasNewValue","teardown","setup","dragulaModel","prevIndex","checkModel","createGroup","subscribe","subs","nativeElement","unsubscribe","itemToRemove","modelIndex","DragulaDirective_Factory","ɵdir","selectors","inputs","outputs","features","propDecorators","selector","DragulaModule","ngModule","providers","ɵmod","ɵinj","DragulaModule_Factory","ngJitMode","declarations","MockDrakeFactory","MockDrake","emitter$","callback","si","setImmediate","tick","setTimeout","DragDropComponent","appSettings","icons","colors","settings","templateUrl","styleUrls","routes","path","component","pathMatch","DragDropModule","forChild","forRoot","imports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,UAAM,CAACC,OAAP,GAAiB,SAASC,IAAT,CAAeC,CAAf,EAAkBC,CAAlB,EAAqB;AAAE,aAAOC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BL,CAA3B,EAA8BC,CAA9B,CAAP;AAA0C,KAAlF;;;;;;;;;;;;;;;;;ACEA,QAAIK,KAAK,GAAG,mBAAO;AAAC;AAAA,2CAAD,CAAnB;;AAEAT,UAAM,CAACC,OAAP,GAAiB,SAASS,QAAT,CAAmBC,EAAnB,EAAuBC,IAAvB,EAA6BC,GAA7B,EAAkC;AACjD,UAAI,CAACF,EAAL,EAAS;AAAE;AAAS;;AACpBF,WAAK,CAAC,SAASK,GAAT,GAAgB;AACpBH,UAAE,CAACI,KAAH,CAASF,GAAG,IAAI,IAAhB,EAAsBD,IAAI,IAAI,EAA9B;AACD,OAFI,CAAL;AAGD,KALD;;;;;;;;;;;;;;;;;ACFA,QAAIV,IAAI,GAAG,mBAAO;AAAC;AAAA,iCAAD,CAAlB;;AACA,QAAIQ,QAAQ,GAAG,mBAAO;AAAC;AAAA,uCAAD,CAAtB;;AAEAV,UAAM,CAACC,OAAP,GAAiB,SAASe,OAAT,CAAkBC,KAAlB,EAAyBC,OAAzB,EAAkC;AACjD,UAAIC,IAAI,GAAGD,OAAO,IAAI,EAAtB;AACA,UAAIE,GAAG,GAAG,EAAV;;AACA,UAAIH,KAAK,KAAKI,SAAd,EAAyB;AAAEJ,aAAK,GAAG,EAAR;AAAa;;AACxCA,WAAK,CAACK,EAAN,GAAW,UAAUC,IAAV,EAAgBZ,EAAhB,EAAoB;AAC7B,YAAI,CAACS,GAAG,CAACG,IAAD,CAAR,EAAgB;AACdH,aAAG,CAACG,IAAD,CAAH,GAAY,CAACZ,EAAD,CAAZ;AACD,SAFD,MAEO;AACLS,aAAG,CAACG,IAAD,CAAH,CAAUC,IAAV,CAAeb,EAAf;AACD;;AACD,eAAOM,KAAP;AACD,OAPD;;AAQAA,WAAK,CAACQ,IAAN,GAAa,UAAUF,IAAV,EAAgBZ,EAAhB,EAAoB;AAC/BA,UAAE,CAACe,KAAH,GAAW,IAAX,CAD+B,CACd;;AACjBT,aAAK,CAACK,EAAN,CAASC,IAAT,EAAeZ,EAAf;AACA,eAAOM,KAAP;AACD,OAJD;;AAKAA,WAAK,CAACU,GAAN,GAAY,UAAUJ,IAAV,EAAgBZ,EAAhB,EAAoB;AAC9B,YAAIiB,CAAC,GAAGC,SAAS,CAACC,MAAlB;;AACA,YAAIF,CAAC,KAAK,CAAV,EAAa;AACX,iBAAOR,GAAG,CAACG,IAAD,CAAV;AACD,SAFD,MAEO,IAAIK,CAAC,KAAK,CAAV,EAAa;AAClBR,aAAG,GAAG,EAAN;AACD,SAFM,MAEA;AACL,cAAIW,EAAE,GAAGX,GAAG,CAACG,IAAD,CAAZ;;AACA,cAAI,CAACQ,EAAL,EAAS;AAAE,mBAAOd,KAAP;AAAe;;AAC1Bc,YAAE,CAACC,MAAH,CAAUD,EAAE,CAACE,OAAH,CAAWtB,EAAX,CAAV,EAA0B,CAA1B;AACD;;AACD,eAAOM,KAAP;AACD,OAZD;;AAaAA,WAAK,CAACiB,IAAN,GAAa,YAAY;AACvB,YAAItB,IAAI,GAAGV,IAAI,CAAC2B,SAAD,CAAf;AACA,eAAOZ,KAAK,CAACkB,eAAN,CAAsBvB,IAAI,CAACwB,KAAL,EAAtB,EAAoCrB,KAApC,CAA0C,IAA1C,EAAgDH,IAAhD,CAAP;AACD,OAHD;;AAIAK,WAAK,CAACkB,eAAN,GAAwB,UAAUZ,IAAV,EAAgB;AACtC,YAAIQ,EAAE,GAAG,CAACX,GAAG,CAACG,IAAD,CAAH,IAAa,EAAd,EAAkBhB,KAAlB,CAAwB,CAAxB,CAAT;AACA,eAAO,YAAY;AACjB,cAAIK,IAAI,GAAGV,IAAI,CAAC2B,SAAD,CAAf;AACA,cAAIhB,GAAG,GAAG,QAAQI,KAAlB;;AACA,cAAIM,IAAI,KAAK,OAAT,IAAoBJ,IAAI,CAACkB,MAAL,KAAgB,KAApC,IAA6C,CAACN,EAAE,CAACD,MAArD,EAA6D;AAAE,kBAAMlB,IAAI,CAACkB,MAAL,KAAgB,CAAhB,GAAoBlB,IAAI,CAAC,CAAD,CAAxB,GAA8BA,IAApC;AAA2C;;AAC1GmB,YAAE,CAACO,OAAH,CAAW,SAAStB,OAAT,CAAkBuB,MAAlB,EAA0B;AACnC,gBAAIpB,IAAI,CAACqB,KAAT,EAAgB;AAAE9B,sBAAQ,CAAC6B,MAAD,EAAS3B,IAAT,EAAeC,GAAf,CAAR;AAA8B,aAAhD,MAAsD;AAAE0B,oBAAM,CAACxB,KAAP,CAAaF,GAAb,EAAkBD,IAAlB;AAA0B;;AAClF,gBAAI2B,MAAM,CAACb,KAAX,EAAkB;AAAET,mBAAK,CAACU,GAAN,CAAUJ,IAAV,EAAgBgB,MAAhB;AAA0B;AAC/C,WAHD;AAIA,iBAAOtB,KAAP;AACD,SATD;AAUD,OAZD;;AAaA,aAAOA,KAAP;AACD,KAhDD;;;;;;;;;;;;;;;;;ACHA,QAAIwB,WAAW,GAAG,mBAAO;AAAC;AAAA,0CAAD,CAAzB;;AACA,QAAIC,QAAQ,GAAG,mBAAO;AAAC;AAAA,8CAAD,CAAtB;;AACA,QAAIC,GAAG,GAAGC,MAAM,CAACC,QAAjB;AACA,QAAIC,QAAQ,GAAGC,YAAf;AACA,QAAIC,WAAW,GAAGC,eAAlB;AACA,QAAIC,SAAS,GAAG,EAAhB;;AAEA,QAAI,CAACN,MAAM,CAACO,gBAAZ,EAA8B;AAC5BL,cAAQ,GAAGM,YAAX;AACAJ,iBAAW,GAAGK,eAAd;AACD;;AAEDrD,UAAM,CAACC,OAAP,GAAiB;AACfqD,SAAG,EAAER,QADU;AAEfS,YAAM,EAAEP,WAFO;AAGfQ,eAAS,EAAEC;AAHI,KAAjB;;AAMA,aAASV,YAAT,CAAuBW,EAAvB,EAA2BnC,IAA3B,EAAiCZ,EAAjC,EAAqCgD,SAArC,EAAgD;AAC9C,aAAOD,EAAE,CAACP,gBAAH,CAAoB5B,IAApB,EAA0BZ,EAA1B,EAA8BgD,SAA9B,CAAP;AACD;;AAED,aAASP,YAAT,CAAuBM,EAAvB,EAA2BnC,IAA3B,EAAiCZ,EAAjC,EAAqC;AACnC,aAAO+C,EAAE,CAACE,WAAH,CAAe,OAAOrC,IAAtB,EAA4BsC,IAAI,CAACH,EAAD,EAAKnC,IAAL,EAAWZ,EAAX,CAAhC,CAAP;AACD;;AAED,aAASsC,eAAT,CAA0BS,EAA1B,EAA8BnC,IAA9B,EAAoCZ,EAApC,EAAwCgD,SAAxC,EAAmD;AACjD,aAAOD,EAAE,CAACI,mBAAH,CAAuBvC,IAAvB,EAA6BZ,EAA7B,EAAiCgD,SAAjC,CAAP;AACD;;AAED,aAASN,eAAT,CAA0BK,EAA1B,EAA8BnC,IAA9B,EAAoCZ,EAApC,EAAwC;AACtC,UAAIoD,QAAQ,GAAGC,MAAM,CAACN,EAAD,EAAKnC,IAAL,EAAWZ,EAAX,CAArB;;AACA,UAAIoD,QAAJ,EAAc;AACZ,eAAOL,EAAE,CAACO,WAAH,CAAe,OAAO1C,IAAtB,EAA4BwC,QAA5B,CAAP;AACD;AACF;;AAED,aAASN,cAAT,CAAyBC,EAAzB,EAA6BnC,IAA7B,EAAmC2C,KAAnC,EAA0C;AACxC,UAAIC,CAAC,GAAGzB,QAAQ,CAACT,OAAT,CAAiBV,IAAjB,MAA2B,CAAC,CAA5B,GAAgC6C,eAAe,EAA/C,GAAoDC,gBAAgB,EAA5E;;AACA,UAAIX,EAAE,CAACY,aAAP,EAAsB;AACpBZ,UAAE,CAACY,aAAH,CAAiBH,CAAjB;AACD,OAFD,MAEO;AACLT,UAAE,CAACa,SAAH,CAAa,OAAOhD,IAApB,EAA0B4C,CAA1B;AACD;;AACD,eAASE,gBAAT,GAA6B;AAC3B,YAAIF,CAAJ;;AACA,YAAIxB,GAAG,CAAC6B,WAAR,EAAqB;AACnBL,WAAC,GAAGxB,GAAG,CAAC6B,WAAJ,CAAgB,OAAhB,CAAJ;AACAL,WAAC,CAACM,SAAF,CAAYlD,IAAZ,EAAkB,IAAlB,EAAwB,IAAxB;AACD,SAHD,MAGO,IAAIoB,GAAG,CAAC+B,iBAAR,EAA2B;AAChCP,WAAC,GAAGxB,GAAG,CAAC+B,iBAAJ,EAAJ;AACD;;AACD,eAAOP,CAAP;AACD;;AACD,eAASC,eAAT,GAA4B;AAC1B,eAAO,IAAI3B,WAAJ,CAAgBlB,IAAhB,EAAsB;AAAEoD,gBAAM,EAAET;AAAV,SAAtB,CAAP;AACD;AACF;;AAED,aAASU,cAAT,CAAyBlB,EAAzB,EAA6BnC,IAA7B,EAAmCZ,EAAnC,EAAuC;AACrC,aAAO,SAASkE,OAAT,CAAkBC,aAAlB,EAAiC;AACtC,YAAIX,CAAC,GAAGW,aAAa,IAAIlC,MAAM,CAACmC,KAAhC;AACAZ,SAAC,CAACa,MAAF,GAAWb,CAAC,CAACa,MAAF,IAAYb,CAAC,CAACc,UAAzB;;AACAd,SAAC,CAACe,cAAF,GAAmBf,CAAC,CAACe,cAAF,IAAoB,SAASA,cAAT,GAA2B;AAAEf,WAAC,CAACgB,WAAF,GAAgB,KAAhB;AAAwB,SAA5F;;AACAhB,SAAC,CAACiB,eAAF,GAAoBjB,CAAC,CAACiB,eAAF,IAAqB,SAASA,eAAT,GAA4B;AAAEjB,WAAC,CAACkB,YAAF,GAAiB,IAAjB;AAAwB,SAA/F;;AACAlB,SAAC,CAACmB,KAAF,GAAUnB,CAAC,CAACmB,KAAF,IAAWnB,CAAC,CAACoB,OAAvB;AACA5E,UAAE,CAACH,IAAH,CAAQkD,EAAR,EAAYS,CAAZ;AACD,OAPD;AAQD;;AAED,aAASN,IAAT,CAAeH,EAAf,EAAmBnC,IAAnB,EAAyBZ,EAAzB,EAA6B;AAC3B,UAAIkE,OAAO,GAAGb,MAAM,CAACN,EAAD,EAAKnC,IAAL,EAAWZ,EAAX,CAAN,IAAwBiE,cAAc,CAAClB,EAAD,EAAKnC,IAAL,EAAWZ,EAAX,CAApD;AACAuC,eAAS,CAAC1B,IAAV,CAAe;AACbqD,eAAO,EAAEA,OADI;AAEbW,eAAO,EAAE9B,EAFI;AAGbnC,YAAI,EAAEA,IAHO;AAIbZ,UAAE,EAAEA;AAJS,OAAf;AAMA,aAAOkE,OAAP;AACD;;AAED,aAASb,MAAT,CAAiBN,EAAjB,EAAqBnC,IAArB,EAA2BZ,EAA3B,EAA+B;AAC7B,UAAI8E,CAAC,GAAGC,IAAI,CAAChC,EAAD,EAAKnC,IAAL,EAAWZ,EAAX,CAAZ;;AACA,UAAI8E,CAAJ,EAAO;AACL,YAAIZ,OAAO,GAAG3B,SAAS,CAACuC,CAAD,CAAT,CAAaZ,OAA3B;AACA3B,iBAAS,CAAClB,MAAV,CAAiByD,CAAjB,EAAoB,CAApB,EAFK,CAEmB;;AACxB,eAAOZ,OAAP;AACD;AACF;;AAED,aAASa,IAAT,CAAehC,EAAf,EAAmBnC,IAAnB,EAAyBZ,EAAzB,EAA6B;AAC3B,UAAI8E,CAAJ,EAAOE,IAAP;;AACA,WAAKF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGvC,SAAS,CAACpB,MAA1B,EAAkC2D,CAAC,EAAnC,EAAuC;AACrCE,YAAI,GAAGzC,SAAS,CAACuC,CAAD,CAAhB;;AACA,YAAIE,IAAI,CAACH,OAAL,KAAiB9B,EAAjB,IAAuBiC,IAAI,CAACpE,IAAL,KAAcA,IAArC,IAA6CoE,IAAI,CAAChF,EAAL,KAAYA,EAA7D,EAAiE;AAC/D,iBAAO8E,CAAP;AACD;AACF;AACF;;;;;;;;;;;;;;;;;AClGD,QAAI/C,QAAQ,GAAG,EAAf;AACA,QAAIkD,SAAS,GAAG,EAAhB;AACA,QAAIC,GAAG,GAAG,KAAV;;AAEA,SAAKD,SAAL,IAAkBhD,MAAlB,EAA0B;AACxB,UAAIiD,GAAG,CAACC,IAAJ,CAASF,SAAT,CAAJ,EAAyB;AACvBlD,gBAAQ,CAAClB,IAAT,CAAcoE,SAAS,CAACrF,KAAV,CAAgB,CAAhB,CAAd;AACD;AACF;;AAEDP,UAAM,CAACC,OAAP,GAAiByC,QAAjB;;;;;;;;;;;;;;ACXA,QAAIqD,iBAAiB,GAAGnD,MAAM,CAACoD,WAA/B;;AAEA,aAASC,SAAT,GAAsB;AACpB,UAAI;AACF,YAAIC,CAAC,GAAG,IAAIH,iBAAJ,CAAsB,KAAtB,EAA6B;AAAEpB,gBAAM,EAAE;AAAEwB,eAAG,EAAE;AAAP;AAAV,SAA7B,CAAR;AACA,eAAQ,UAAUD,CAAC,CAAC3E,IAAZ,IAAoB,UAAU2E,CAAC,CAACvB,MAAF,CAASwB,GAA/C;AACD,OAHD,CAGE,OAAOhC,CAAP,EAAU,CACX;;AACD,aAAO,KAAP;AACD;AAED;;;;;;;;;AAQAnE,UAAM,CAACC,OAAP,GAAiBgG,SAAS,KAAKF,iBAAL,GAE1B;AACA,mBAAe,OAAOlD,QAAQ,CAAC2B,WAA/B,GAA6C,SAASwB,WAAT,CAAsBzE,IAAtB,EAA4B6E,MAA5B,EAAoC;AAC/E,UAAIjC,CAAC,GAAGtB,QAAQ,CAAC2B,WAAT,CAAqB,aAArB,CAAR;;AACA,UAAI4B,MAAJ,EAAY;AACVjC,SAAC,CAACkC,eAAF,CAAkB9E,IAAlB,EAAwB6E,MAAM,CAACE,OAA/B,EAAwCF,MAAM,CAACG,UAA/C,EAA2DH,MAAM,CAACzB,MAAlE;AACD,OAFD,MAEO;AACLR,SAAC,CAACkC,eAAF,CAAkB9E,IAAlB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,KAAK,CAA3C;AACD;;AACD,aAAO4C,CAAP;AACD,KARD,GAUA;AACA,aAAS6B,WAAT,CAAsBzE,IAAtB,EAA4B6E,MAA5B,EAAoC;AAClC,UAAIjC,CAAC,GAAGtB,QAAQ,CAAC6B,iBAAT,EAAR;AACAP,OAAC,CAAC5C,IAAF,GAASA,IAAT;;AACA,UAAI6E,MAAJ,EAAY;AACVjC,SAAC,CAACmC,OAAF,GAAYE,OAAO,CAACJ,MAAM,CAACE,OAAR,CAAnB;AACAnC,SAAC,CAACoC,UAAF,GAAeC,OAAO,CAACJ,MAAM,CAACG,UAAR,CAAtB;AACApC,SAAC,CAACQ,MAAF,GAAWyB,MAAM,CAACzB,MAAlB;AACD,OAJD,MAIO;AACLR,SAAC,CAACmC,OAAF,GAAY,KAAZ;AACAnC,SAAC,CAACoC,UAAF,GAAe,KAAf;AACApC,SAAC,CAACQ,MAAF,GAAW,KAAK,CAAhB;AACD;;AACD,aAAOR,CAAP;AACD,KA3BD;;;;;;;;;;;;;;;;AClBA,QAAIsC,KAAK,GAAG,EAAZ;AACA,QAAIC,KAAK,GAAG,WAAZ;AACA,QAAIC,GAAG,GAAG,WAAV;;AAEA,aAASC,WAAT,CAAsBC,SAAtB,EAAiC;AAC/B,UAAIC,MAAM,GAAGL,KAAK,CAACI,SAAD,CAAlB;;AACA,UAAIC,MAAJ,EAAY;AACVA,cAAM,CAACC,SAAP,GAAmB,CAAnB;AACD,OAFD,MAEO;AACLN,aAAK,CAACI,SAAD,CAAL,GAAmBC,MAAM,GAAG,IAAIE,MAAJ,CAAWN,KAAK,GAAGG,SAAR,GAAoBF,GAA/B,EAAoC,GAApC,CAA5B;AACD;;AACD,aAAOG,MAAP;AACD;;AAED,aAASG,QAAT,CAAmBvD,EAAnB,EAAuBmD,SAAvB,EAAkC;AAChC,UAAIK,OAAO,GAAGxD,EAAE,CAACmD,SAAjB;;AACA,UAAI,CAACK,OAAO,CAACpF,MAAb,EAAqB;AACnB4B,UAAE,CAACmD,SAAH,GAAeA,SAAf;AACD,OAFD,MAEO,IAAI,CAACD,WAAW,CAACC,SAAD,CAAX,CAAuBf,IAAvB,CAA4BoB,OAA5B,CAAL,EAA2C;AAChDxD,UAAE,CAACmD,SAAH,IAAgB,MAAMA,SAAtB;AACD;AACF;;AAED,aAASM,OAAT,CAAkBzD,EAAlB,EAAsBmD,SAAtB,EAAiC;AAC/BnD,QAAE,CAACmD,SAAH,GAAenD,EAAE,CAACmD,SAAH,CAAaO,OAAb,CAAqBR,WAAW,CAACC,SAAD,CAAhC,EAA6C,GAA7C,EAAkDQ,IAAlD,EAAf;AACD;;AAEDrH,UAAM,CAACC,OAAP,GAAiB;AACfqD,SAAG,EAAE2D,QADU;AAEfK,QAAE,EAAEH;AAFW,KAAjB;;;;;;;;;;;;;;;;AC3BA,QAAInG,OAAO,GAAG,mBAAO;AAAC;AAAA,sCAAD,CAArB;;AACA,QAAIuG,SAAS,GAAG,mBAAO;AAAC;AAAA,+CAAD,CAAvB;;AACA,QAAIC,OAAO,GAAG,mBAAO;AAAC;AAAA,uCAAD,CAArB;;AACA,QAAI7E,GAAG,GAAGE,QAAV;AACA,QAAI4E,eAAe,GAAG9E,GAAG,CAAC8E,eAA1B;;AAEA,aAASC,OAAT,CAAkBC,iBAAlB,EAAqCzG,OAArC,EAA8C;AAC5C,UAAI0G,GAAG,GAAG/F,SAAS,CAACC,MAApB;;AACA,UAAI8F,GAAG,KAAK,CAAR,IAAavH,KAAK,CAACwH,OAAN,CAAcF,iBAAd,MAAqC,KAAtD,EAA6D;AAC3DzG,eAAO,GAAGyG,iBAAV;AACAA,yBAAiB,GAAG,EAApB;AACD;;AACD,UAAIG,OAAJ,CAN4C,CAM/B;;;AACb,UAAIC,OAAJ,CAP4C,CAO/B;;;AACb,UAAIC,KAAJ,CAR4C,CAQjC;;;AACX,UAAIC,QAAJ,CAT4C,CAS9B;;;AACd,UAAIC,QAAJ,CAV4C,CAU9B;;;AACd,UAAIC,MAAJ,CAX4C,CAWhC;;;AACZ,UAAIC,MAAJ,CAZ4C,CAYhC;;;AACZ,UAAIC,eAAJ,CAb4C,CAavB;;;AACrB,UAAIC,eAAJ,CAd4C,CAcvB;;;AACrB,UAAIC,KAAJ,CAf4C,CAejC;;;AACX,UAAIC,YAAJ,CAhB4C,CAgB1B;;;AAClB,UAAIC,eAAe,GAAG,IAAtB,CAjB4C,CAiBhB;;AAC5B,UAAIC,QAAJ,CAlB4C,CAkB9B;;;AAEd,UAAIC,CAAC,GAAGzH,OAAO,IAAI,EAAnB;;AACA,UAAIyH,CAAC,CAACC,KAAF,KAAY,KAAK,CAArB,EAAwB;AAAED,SAAC,CAACC,KAAF,GAAUC,MAAV;AAAmB;;AAC7C,UAAIF,CAAC,CAACG,OAAF,KAAc,KAAK,CAAvB,EAA0B;AAAEH,SAAC,CAACG,OAAF,GAAYD,MAAZ;AAAqB;;AACjD,UAAIF,CAAC,CAACI,OAAF,KAAc,KAAK,CAAvB,EAA0B;AAAEJ,SAAC,CAACI,OAAF,GAAYC,aAAZ;AAA4B;;AACxD,UAAIL,CAAC,CAACM,UAAF,KAAiB,KAAK,CAA1B,EAA6B;AAAEN,SAAC,CAACM,UAAF,GAAetB,iBAAiB,IAAI,EAApC;AAAyC;;AACxE,UAAIgB,CAAC,CAACO,WAAF,KAAkB,KAAK,CAA3B,EAA8B;AAAEP,SAAC,CAACO,WAAF,GAAgBC,KAAhB;AAAwB;;AACxD,UAAIR,CAAC,CAACS,IAAF,KAAW,KAAK,CAApB,EAAuB;AAAET,SAAC,CAACS,IAAF,GAAS,KAAT;AAAiB;;AAC1C,UAAIT,CAAC,CAACU,cAAF,KAAqB,KAAK,CAA9B,EAAiC;AAAEV,SAAC,CAACU,cAAF,GAAmB,KAAnB;AAA2B;;AAC9D,UAAIV,CAAC,CAACW,aAAF,KAAoB,KAAK,CAA7B,EAAgC;AAAEX,SAAC,CAACW,aAAF,GAAkB,KAAlB;AAA0B;;AAC5D,UAAIX,CAAC,CAACY,aAAF,KAAoB,KAAK,CAA7B,EAAgC;AAAEZ,SAAC,CAACY,aAAF,GAAkB,KAAlB;AAA0B;;AAC5D,UAAIZ,CAAC,CAACa,SAAF,KAAgB,KAAK,CAAzB,EAA4B;AAAEb,SAAC,CAACa,SAAF,GAAc,UAAd;AAA2B;;AACzD,UAAIb,CAAC,CAACc,wBAAF,KAA+B,KAAK,CAAxC,EAA2C;AAAEd,SAAC,CAACc,wBAAF,GAA6B,IAA7B;AAAoC;;AACjF,UAAId,CAAC,CAACe,eAAF,KAAsB,KAAK,CAA/B,EAAkC;AAAEf,SAAC,CAACe,eAAF,GAAoB/G,GAAG,CAACgH,IAAxB;AAA+B;;AAEnE,UAAIC,KAAK,GAAG5I,OAAO,CAAC;AAClBiI,kBAAU,EAAEN,CAAC,CAACM,UADI;AAElBvC,aAAK,EAAEmD,WAFW;AAGlBlD,WAAG,EAAEA,GAHa;AAIlBmD,cAAM,EAAEA,MAJU;AAKlBvG,cAAM,EAAEA,MALU;AAMlBwG,eAAO,EAAEA,OANS;AAOlBC,eAAO,EAAEA,OAPS;AAQlBC,gBAAQ,EAAE;AARQ,OAAD,CAAnB;;AAWA,UAAItB,CAAC,CAACY,aAAF,KAAoB,IAAxB,EAA8B;AAC5BK,aAAK,CAACtI,EAAN,CAAS,MAAT,EAAiB4I,SAAjB,EAA4B5I,EAA5B,CAA+B,KAA/B,EAAsC6I,QAAtC;AACD;;AAEDC,YAAM;AAEN,aAAOR,KAAP;;AAEA,eAASV,WAAT,CAAsBxF,EAAtB,EAA0B;AACxB,eAAOkG,KAAK,CAACX,UAAN,CAAiBhH,OAAjB,CAAyByB,EAAzB,MAAiC,CAAC,CAAlC,IAAuCiF,CAAC,CAACO,WAAF,CAAcxF,EAAd,CAA9C;AACD;;AAED,eAAS0G,MAAT,CAAiB7G,MAAjB,EAAyB;AACvB,YAAI8G,EAAE,GAAG9G,MAAM,GAAG,QAAH,GAAc,KAA7B;AACA+G,cAAM,CAAC7C,eAAD,EAAkB4C,EAAlB,EAAsB,WAAtB,EAAmCE,IAAnC,CAAN;AACAD,cAAM,CAAC7C,eAAD,EAAkB4C,EAAlB,EAAsB,SAAtB,EAAiCG,OAAjC,CAAN;AACD;;AAED,eAASC,iBAAT,CAA4BlH,MAA5B,EAAoC;AAClC,YAAI8G,EAAE,GAAG9G,MAAM,GAAG,QAAH,GAAc,KAA7B;AACA+G,cAAM,CAAC7C,eAAD,EAAkB4C,EAAlB,EAAsB,WAAtB,EAAmCK,sBAAnC,CAAN;AACD;;AAED,eAASC,SAAT,CAAoBpH,MAApB,EAA4B;AAC1B,YAAI8G,EAAE,GAAG9G,MAAM,GAAG,QAAH,GAAc,KAA7B;AACAgE,iBAAS,CAAC8C,EAAD,CAAT,CAAc5C,eAAd,EAA+B,aAA/B,EAA8CmD,cAA9C,EAF0B,CAEqC;;AAC/DrD,iBAAS,CAAC8C,EAAD,CAAT,CAAc5C,eAAd,EAA+B,OAA/B,EAAwCmD,cAAxC;AACD;;AAED,eAASb,OAAT,GAAoB;AAClBK,cAAM,CAAC,IAAD,CAAN;AACAI,eAAO,CAAC,EAAD,CAAP;AACD;;AAED,eAASI,cAAT,CAAyBzG,CAAzB,EAA4B;AAC1B,YAAIuE,QAAJ,EAAc;AACZvE,WAAC,CAACe,cAAF;AACD;AACF;;AAED,eAASqF,IAAT,CAAepG,CAAf,EAAkB;AAChBgE,cAAM,GAAGhE,CAAC,CAAC0G,OAAX;AACAzC,cAAM,GAAGjE,CAAC,CAAC2G,OAAX;AAEA,YAAIC,MAAM,GAAGC,gBAAgB,CAAC7G,CAAD,CAAhB,KAAwB,CAAxB,IAA6BA,CAAC,CAAC8G,OAA/B,IAA0C9G,CAAC,CAAC+G,OAAzD;;AACA,YAAIH,MAAJ,EAAY;AACV,iBADU,CACF;AACT;;AACD,YAAIpF,IAAI,GAAGxB,CAAC,CAACa,MAAb;AACA,YAAImG,OAAO,GAAGC,QAAQ,CAACzF,IAAD,CAAtB;;AACA,YAAI,CAACwF,OAAL,EAAc;AACZ;AACD;;AACDzC,gBAAQ,GAAGyC,OAAX;AACAV,yBAAiB;;AACjB,YAAItG,CAAC,CAAC5C,IAAF,KAAW,WAAf,EAA4B;AAC1B,cAAI8J,OAAO,CAAC1F,IAAD,CAAX,EAAmB;AAAE;AACnBA,gBAAI,CAAC2F,KAAL,GADiB,CACH;AACf,WAFD,MAEO;AACLnH,aAAC,CAACe,cAAF,GADK,CACe;AACrB;AACF;AACF;;AAED,eAASwF,sBAAT,CAAiCvG,CAAjC,EAAoC;AAClC,YAAI,CAACuE,QAAL,EAAe;AACb;AACD;;AACD,YAAIsC,gBAAgB,CAAC7G,CAAD,CAAhB,KAAwB,CAA5B,EAA+B;AAC7BqG,iBAAO,CAAC,EAAD,CAAP;AACA,iBAF6B,CAErB;AACT,SAPiC,CAQlC;;;AACA,YAAIrG,CAAC,CAAC0G,OAAF,KAAc,KAAK,CAAnB,IAAwB1G,CAAC,CAAC0G,OAAF,KAAc1C,MAAtC,IAAgDhE,CAAC,CAAC2G,OAAF,KAAc,KAAK,CAAnE,IAAwE3G,CAAC,CAAC2G,OAAF,KAAc1C,MAA1F,EAAkG;AAChG;AACD;;AACD,YAAIO,CAAC,CAACc,wBAAN,EAAgC;AAC9B,cAAIoB,OAAO,GAAGU,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,cAAI2G,OAAO,GAAGS,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,cAAIqH,mBAAmB,GAAG7I,GAAG,CAAC8I,gBAAJ,CAAqBZ,OAArB,EAA8BC,OAA9B,CAA1B;;AACA,cAAIO,OAAO,CAACG,mBAAD,CAAX,EAAkC;AAChC;AACD;AACF;;AAED,YAAIE,OAAO,GAAGhD,QAAd,CArBkC,CAqBV;;AACxB+B,yBAAiB,CAAC,IAAD,CAAjB;AACAE,iBAAS;AACThE,WAAG;AACHD,aAAK,CAACgF,OAAD,CAAL;AAEA,YAAIC,MAAM,GAAGC,SAAS,CAAC5D,KAAD,CAAtB;AACAC,gBAAQ,GAAGsD,QAAQ,CAAC,OAAD,EAAUpH,CAAV,CAAR,GAAuBwH,MAAM,CAACE,IAAzC;AACA3D,gBAAQ,GAAGqD,QAAQ,CAAC,OAAD,EAAUpH,CAAV,CAAR,GAAuBwH,MAAM,CAACG,GAAzC;AAEAtE,eAAO,CAAClE,GAAR,CAAYiF,KAAK,IAAIP,KAArB,EAA4B,YAA5B;AACA+D,yBAAiB;AACjBC,YAAI,CAAC7H,CAAD,CAAJ;AACD;;AAED,eAASiH,QAAT,CAAmBzF,IAAnB,EAAyB;AACvB,YAAIiE,KAAK,CAACK,QAAN,IAAkBnC,OAAtB,EAA+B;AAC7B;AACD;;AACD,YAAIoB,WAAW,CAACvD,IAAD,CAAf,EAAuB;AACrB,iBADqB,CACb;AACT;;AACD,YAAIsG,MAAM,GAAGtG,IAAb;;AACA,eAAOuG,SAAS,CAACvG,IAAD,CAAT,IAAmBuD,WAAW,CAACgD,SAAS,CAACvG,IAAD,CAAV,CAAX,KAAiC,KAA3D,EAAkE;AAChE,cAAIgD,CAAC,CAACI,OAAF,CAAUpD,IAAV,EAAgBsG,MAAhB,CAAJ,EAA6B;AAC3B;AACD;;AACDtG,cAAI,GAAGuG,SAAS,CAACvG,IAAD,CAAhB,CAJgE,CAIxC;;AACxB,cAAI,CAACA,IAAL,EAAW;AACT;AACD;AACF;;AACD,YAAIwG,MAAM,GAAGD,SAAS,CAACvG,IAAD,CAAtB;;AACA,YAAI,CAACwG,MAAL,EAAa;AACX;AACD;;AACD,YAAIxD,CAAC,CAACI,OAAF,CAAUpD,IAAV,EAAgBsG,MAAhB,CAAJ,EAA6B;AAC3B;AACD;;AAED,YAAIG,OAAO,GAAGzD,CAAC,CAACC,KAAF,CAAQjD,IAAR,EAAcwG,MAAd,EAAsBF,MAAtB,EAA8BI,MAAM,CAAC1G,IAAD,CAApC,CAAd;;AACA,YAAI,CAACyG,OAAL,EAAc;AACZ;AACD;;AAED,eAAO;AACLzG,cAAI,EAAEA,IADD;AAELwG,gBAAM,EAAEA;AAFH,SAAP;AAID;;AAED,eAASnC,OAAT,CAAkBrE,IAAlB,EAAwB;AACtB,eAAO,CAAC,CAACyF,QAAQ,CAACzF,IAAD,CAAjB;AACD;;AAED,eAASkE,WAAT,CAAsBlE,IAAtB,EAA4B;AAC1B,YAAIwF,OAAO,GAAGC,QAAQ,CAACzF,IAAD,CAAtB;;AACA,YAAIwF,OAAJ,EAAa;AACXzE,eAAK,CAACyE,OAAD,CAAL;AACD;AACF;;AAED,eAASzE,KAAT,CAAgByE,OAAhB,EAAyB;AACvB,YAAImB,MAAM,CAACnB,OAAO,CAACxF,IAAT,EAAewF,OAAO,CAACgB,MAAvB,CAAV,EAA0C;AACxC5D,eAAK,GAAG4C,OAAO,CAACxF,IAAR,CAAa4G,SAAb,CAAuB,IAAvB,CAAR;AACA3C,eAAK,CAAC1H,IAAN,CAAW,QAAX,EAAqBqG,KAArB,EAA4B4C,OAAO,CAACxF,IAApC,EAA0C,MAA1C;AACD;;AAEDoC,eAAO,GAAGoD,OAAO,CAACgB,MAAlB;AACAnE,aAAK,GAAGmD,OAAO,CAACxF,IAAhB;AACA0C,uBAAe,GAAGC,eAAe,GAAG+D,MAAM,CAAClB,OAAO,CAACxF,IAAT,CAA1C;AAEAiE,aAAK,CAACK,QAAN,GAAiB,IAAjB;AACAL,aAAK,CAAC1H,IAAN,CAAW,MAAX,EAAmB8F,KAAnB,EAA0BD,OAA1B;AACD;;AAED,eAASiB,aAAT,GAA0B;AACxB,eAAO,KAAP;AACD;;AAED,eAASrC,GAAT,GAAgB;AACd,YAAI,CAACiD,KAAK,CAACK,QAAX,EAAqB;AACnB;AACD;;AACD,YAAItE,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACAwE,YAAI,CAAC7G,IAAD,EAAOuG,SAAS,CAACvG,IAAD,CAAhB,CAAJ;AACD;;AAED,eAAS8G,MAAT,GAAmB;AACjB/D,gBAAQ,GAAG,KAAX;AACA+B,yBAAiB,CAAC,IAAD,CAAjB;AACAE,iBAAS,CAAC,IAAD,CAAT;AACD;;AAED,eAASH,OAAT,CAAkBrG,CAAlB,EAAqB;AACnBsI,cAAM;;AAEN,YAAI,CAAC7C,KAAK,CAACK,QAAX,EAAqB;AACnB;AACD;;AACD,YAAItE,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACA,YAAI6C,OAAO,GAAGU,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,YAAI2G,OAAO,GAAGS,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,YAAIqH,mBAAmB,GAAGkB,qBAAqB,CAAC5E,OAAD,EAAU+C,OAAV,EAAmBC,OAAnB,CAA/C;AACA,YAAI6B,UAAU,GAAGC,cAAc,CAACpB,mBAAD,EAAsBX,OAAtB,EAA+BC,OAA/B,CAA/B;;AACA,YAAI6B,UAAU,KAAMpE,KAAK,IAAII,CAAC,CAACU,cAAZ,IAAgC,CAACd,KAAD,IAAUoE,UAAU,KAAK5E,OAA9D,CAAd,EAAuF;AACrFyE,cAAI,CAAC7G,IAAD,EAAOgH,UAAP,CAAJ;AACD,SAFD,MAEO,IAAIhE,CAAC,CAACY,aAAN,EAAqB;AAC1BhG,gBAAM;AACP,SAFM,MAEA;AACLuG,gBAAM;AACP;AACF;;AAED,eAAS0C,IAAT,CAAe7G,IAAf,EAAqBX,MAArB,EAA6B;AAC3B,YAAI6H,MAAM,GAAGX,SAAS,CAACvG,IAAD,CAAtB;;AACA,YAAI4C,KAAK,IAAII,CAAC,CAACU,cAAX,IAA6BrE,MAAM,KAAK+C,OAA5C,EAAqD;AACnD8E,gBAAM,CAACC,WAAP,CAAmB9E,KAAnB;AACD;;AACD,YAAI+E,kBAAkB,CAAC/H,MAAD,CAAtB,EAAgC;AAC9B4E,eAAK,CAAC1H,IAAN,CAAW,QAAX,EAAqByD,IAArB,EAA2BoC,OAA3B,EAAoCA,OAApC;AACD,SAFD,MAEO;AACL6B,eAAK,CAAC1H,IAAN,CAAW,MAAX,EAAmByD,IAAnB,EAAyBX,MAAzB,EAAiC+C,OAAjC,EAA0CO,eAA1C;AACD;;AACD0E,eAAO;AACR;;AAED,eAASzJ,MAAT,GAAmB;AACjB,YAAI,CAACqG,KAAK,CAACK,QAAX,EAAqB;AACnB;AACD;;AACD,YAAItE,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACA,YAAI6E,MAAM,GAAGX,SAAS,CAACvG,IAAD,CAAtB;;AACA,YAAIkH,MAAJ,EAAY;AACVA,gBAAM,CAACC,WAAP,CAAmBnH,IAAnB;AACD;;AACDiE,aAAK,CAAC1H,IAAN,CAAWqG,KAAK,GAAG,QAAH,GAAc,QAA9B,EAAwC5C,IAAxC,EAA8CkH,MAA9C,EAAsD9E,OAAtD;AACAiF,eAAO;AACR;;AAED,eAASlD,MAAT,CAAiBmD,MAAjB,EAAyB;AACvB,YAAI,CAACrD,KAAK,CAACK,QAAX,EAAqB;AACnB;AACD;;AACD,YAAIiD,OAAO,GAAGrL,SAAS,CAACC,MAAV,GAAmB,CAAnB,GAAuBmL,MAAvB,GAAgCtE,CAAC,CAACW,aAAhD;AACA,YAAI3D,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACA,YAAI6E,MAAM,GAAGX,SAAS,CAACvG,IAAD,CAAtB;AACA,YAAIwH,OAAO,GAAGJ,kBAAkB,CAACF,MAAD,CAAhC;;AACA,YAAIM,OAAO,KAAK,KAAZ,IAAqBD,OAAzB,EAAkC;AAChC,cAAI3E,KAAJ,EAAW;AACT,gBAAIsE,MAAJ,EAAY;AACVA,oBAAM,CAACC,WAAP,CAAmBvE,KAAnB;AACD;AACF,WAJD,MAIO;AACLR,mBAAO,CAACqF,YAAR,CAAqBzH,IAArB,EAA2B0C,eAA3B;AACD;AACF;;AACD,YAAI8E,OAAO,IAAID,OAAf,EAAwB;AACtBtD,eAAK,CAAC1H,IAAN,CAAW,QAAX,EAAqByD,IAArB,EAA2BoC,OAA3B,EAAoCA,OAApC;AACD,SAFD,MAEO;AACL6B,eAAK,CAAC1H,IAAN,CAAW,MAAX,EAAmByD,IAAnB,EAAyBkH,MAAzB,EAAiC9E,OAAjC,EAA0CO,eAA1C;AACD;;AACD0E,eAAO;AACR;;AAED,eAASA,OAAT,GAAoB;AAClB,YAAIrH,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACAyE,cAAM;AACNY,yBAAiB;;AACjB,YAAI1H,IAAJ,EAAU;AACR6B,iBAAO,CAACF,EAAR,CAAW3B,IAAX,EAAiB,YAAjB;AACD;;AACD,YAAI6C,YAAJ,EAAkB;AAChB8E,sBAAY,CAAC9E,YAAD,CAAZ;AACD;;AACDoB,aAAK,CAACK,QAAN,GAAiB,KAAjB;;AACA,YAAIxB,eAAJ,EAAqB;AACnBmB,eAAK,CAAC1H,IAAN,CAAW,KAAX,EAAkByD,IAAlB,EAAwB8C,eAAxB,EAAyCV,OAAzC;AACD;;AACD6B,aAAK,CAAC1H,IAAN,CAAW,SAAX,EAAsByD,IAAtB;AACAoC,eAAO,GAAGC,KAAK,GAAGO,KAAK,GAAGF,eAAe,GAAGC,eAAe,GAAGE,YAAY,GAAGC,eAAe,GAAG,IAA/F;AACD;;AAED,eAASsE,kBAAT,CAA6B/H,MAA7B,EAAqCuI,CAArC,EAAwC;AACtC,YAAIC,OAAJ;;AACA,YAAID,CAAC,KAAK,KAAK,CAAf,EAAkB;AAChBC,iBAAO,GAAGD,CAAV;AACD,SAFD,MAEO,IAAIzF,OAAJ,EAAa;AAClB0F,iBAAO,GAAGlF,eAAV;AACD,SAFM,MAEA;AACLkF,iBAAO,GAAGnB,MAAM,CAAC9D,KAAK,IAAIP,KAAV,CAAhB;AACD;;AACD,eAAOhD,MAAM,KAAK+C,OAAX,IAAsByF,OAAO,KAAKnF,eAAzC;AACD;;AAED,eAASuE,cAAT,CAAyBpB,mBAAzB,EAA8CX,OAA9C,EAAuDC,OAAvD,EAAgE;AAC9D,YAAI9F,MAAM,GAAGwG,mBAAb;;AACA,eAAOxG,MAAM,IAAI,CAACyI,QAAQ,EAA1B,EAA8B;AAC5BzI,gBAAM,GAAGkH,SAAS,CAAClH,MAAD,CAAlB;AACD;;AACD,eAAOA,MAAP;;AAEA,iBAASyI,QAAT,GAAqB;AACnB,cAAIC,SAAS,GAAGxE,WAAW,CAAClE,MAAD,CAA3B;;AACA,cAAI0I,SAAS,KAAK,KAAlB,EAAyB;AACvB,mBAAO,KAAP;AACD;;AAED,cAAIC,SAAS,GAAGC,iBAAiB,CAAC5I,MAAD,EAASwG,mBAAT,CAAjC;AACA,cAAIqC,SAAS,GAAGC,YAAY,CAAC9I,MAAD,EAAS2I,SAAT,EAAoB9C,OAApB,EAA6BC,OAA7B,CAA5B;AACA,cAAIqC,OAAO,GAAGJ,kBAAkB,CAAC/H,MAAD,EAAS6I,SAAT,CAAhC;;AACA,cAAIV,OAAJ,EAAa;AACX,mBAAO,IAAP,CADW,CACE;AACd;;AACD,iBAAOxE,CAAC,CAACG,OAAF,CAAUd,KAAV,EAAiBhD,MAAjB,EAAyB+C,OAAzB,EAAkC8F,SAAlC,CAAP;AACD;AACF;;AAED,eAAS7B,IAAT,CAAe7H,CAAf,EAAkB;AAChB,YAAI,CAAC2D,OAAL,EAAc;AACZ;AACD;;AACD3D,SAAC,CAACe,cAAF;AAEA,YAAI2F,OAAO,GAAGU,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,YAAI2G,OAAO,GAAGS,QAAQ,CAAC,SAAD,EAAYpH,CAAZ,CAAtB;AACA,YAAI4J,CAAC,GAAGlD,OAAO,GAAG5C,QAAlB;AACA,YAAI+F,CAAC,GAAGlD,OAAO,GAAG5C,QAAlB;AAEAJ,eAAO,CAACmG,KAAR,CAAcpC,IAAd,GAAqBkC,CAAC,GAAG,IAAzB;AACAjG,eAAO,CAACmG,KAAR,CAAcnC,GAAd,GAAoBkC,CAAC,GAAG,IAAxB;AAEA,YAAIrI,IAAI,GAAG4C,KAAK,IAAIP,KAApB;AACA,YAAIwD,mBAAmB,GAAGkB,qBAAqB,CAAC5E,OAAD,EAAU+C,OAAV,EAAmBC,OAAnB,CAA/C;AACA,YAAI6B,UAAU,GAAGC,cAAc,CAACpB,mBAAD,EAAsBX,OAAtB,EAA+BC,OAA/B,CAA/B;AACA,YAAIoD,OAAO,GAAGvB,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAKlE,eAApD;;AACA,YAAIyF,OAAO,IAAIvB,UAAU,KAAK,IAA9B,EAAoC;AAClCwB,aAAG;AACH1F,yBAAe,GAAGkE,UAAlB;AACAyB,cAAI;AACL;;AACD,YAAIvB,MAAM,GAAGX,SAAS,CAACvG,IAAD,CAAtB;;AACA,YAAIgH,UAAU,KAAK5E,OAAf,IAA0BQ,KAA1B,IAAmC,CAACI,CAAC,CAACU,cAA1C,EAA0D;AACxD,cAAIwD,MAAJ,EAAY;AACVA,kBAAM,CAACC,WAAP,CAAmBnH,IAAnB;AACD;;AACD;AACD;;AACD,YAAIkI,SAAJ;AACA,YAAIF,SAAS,GAAGC,iBAAiB,CAACjB,UAAD,EAAanB,mBAAb,CAAjC;;AACA,YAAImC,SAAS,KAAK,IAAlB,EAAwB;AACtBE,mBAAS,GAAGC,YAAY,CAACnB,UAAD,EAAagB,SAAb,EAAwB9C,OAAxB,EAAiCC,OAAjC,CAAxB;AACD,SAFD,MAEO,IAAInC,CAAC,CAACW,aAAF,KAAoB,IAApB,IAA4B,CAACf,KAAjC,EAAwC;AAC7CsF,mBAAS,GAAGxF,eAAZ;AACAsE,oBAAU,GAAG5E,OAAb;AACD,SAHM,MAGA;AACL,cAAIQ,KAAK,IAAIsE,MAAb,EAAqB;AACnBA,kBAAM,CAACC,WAAP,CAAmBnH,IAAnB;AACD;;AACD;AACD;;AACD,YACGkI,SAAS,KAAK,IAAd,IAAsBK,OAAvB,IACAL,SAAS,KAAKlI,IAAd,IACAkI,SAAS,KAAKxB,MAAM,CAAC1G,IAAD,CAHtB,EAIE;AACA2C,yBAAe,GAAGuF,SAAlB;AACAlB,oBAAU,CAACS,YAAX,CAAwBzH,IAAxB,EAA8BkI,SAA9B;AACAjE,eAAK,CAAC1H,IAAN,CAAW,QAAX,EAAqByD,IAArB,EAA2BgH,UAA3B,EAAuC5E,OAAvC;AACD;;AACD,iBAASsG,KAAT,CAAgB9M,IAAhB,EAAsB;AAAEqI,eAAK,CAAC1H,IAAN,CAAWX,IAAX,EAAiBoE,IAAjB,EAAuB8C,eAAvB,EAAwCV,OAAxC;AAAmD;;AAC3E,iBAASqG,IAAT,GAAiB;AAAE,cAAIF,OAAJ,EAAa;AAAEG,iBAAK,CAAC,MAAD,CAAL;AAAgB;AAAE;;AACpD,iBAASF,GAAT,GAAgB;AAAE,cAAI1F,eAAJ,EAAqB;AAAE4F,iBAAK,CAAC,KAAD,CAAL;AAAe;AAAE;AAC3D;;AAED,eAASnE,SAAT,CAAoBxG,EAApB,EAAwB;AACtB8D,eAAO,CAACF,EAAR,CAAW5D,EAAX,EAAe,SAAf;AACD;;AAED,eAASyG,QAAT,CAAmBzG,EAAnB,EAAuB;AACrB,YAAIkG,KAAK,CAACK,QAAV,EAAoB;AAAEzC,iBAAO,CAAClE,GAAR,CAAYI,EAAZ,EAAgB,SAAhB;AAA6B;AACpD;;AAED,eAASqI,iBAAT,GAA8B;AAC5B,YAAIjE,OAAJ,EAAa;AACX;AACD;;AACD,YAAIwG,IAAI,GAAGtG,KAAK,CAACuG,qBAAN,EAAX;;AACAzG,eAAO,GAAGE,KAAK,CAACuE,SAAN,CAAgB,IAAhB,CAAV;AACAzE,eAAO,CAACmG,KAAR,CAAcO,KAAd,GAAsBC,YAAY,CAACH,IAAD,CAAZ,GAAqB,IAA3C;AACAxG,eAAO,CAACmG,KAAR,CAAcS,MAAd,GAAuBC,aAAa,CAACL,IAAD,CAAb,GAAsB,IAA7C;AACA9G,eAAO,CAACF,EAAR,CAAWQ,OAAX,EAAoB,YAApB;AACAN,eAAO,CAAClE,GAAR,CAAYwE,OAAZ,EAAqB,WAArB;AACAa,SAAC,CAACe,eAAF,CAAkBkF,WAAlB,CAA8B9G,OAA9B;AACAwC,cAAM,CAAC7C,eAAD,EAAkB,KAAlB,EAAyB,WAAzB,EAAsCuE,IAAtC,CAAN;AACAxE,eAAO,CAAClE,GAAR,CAAYqF,CAAC,CAACe,eAAd,EAA+B,iBAA/B;AACAE,aAAK,CAAC1H,IAAN,CAAW,QAAX,EAAqB4F,OAArB,EAA8BE,KAA9B,EAAqC,QAArC;AACD;;AAED,eAASqF,iBAAT,GAA8B;AAC5B,YAAIvF,OAAJ,EAAa;AACXN,iBAAO,CAACF,EAAR,CAAWqB,CAAC,CAACe,eAAb,EAA8B,iBAA9B;AACAY,gBAAM,CAAC7C,eAAD,EAAkB,QAAlB,EAA4B,WAA5B,EAAyCuE,IAAzC,CAAN;AACAE,mBAAS,CAACpE,OAAD,CAAT,CAAmBgF,WAAnB,CAA+BhF,OAA/B;AACAA,iBAAO,GAAG,IAAV;AACD;AACF;;AAED,eAAS8F,iBAAT,CAA4BjB,UAA5B,EAAwC3H,MAAxC,EAAgD;AAC9C,YAAI2I,SAAS,GAAG3I,MAAhB;;AACA,eAAO2I,SAAS,KAAKhB,UAAd,IAA4BT,SAAS,CAACyB,SAAD,CAAT,KAAyBhB,UAA5D,EAAwE;AACtEgB,mBAAS,GAAGzB,SAAS,CAACyB,SAAD,CAArB;AACD;;AACD,YAAIA,SAAS,KAAKlG,eAAlB,EAAmC;AACjC,iBAAO,IAAP;AACD;;AACD,eAAOkG,SAAP;AACD;;AAED,eAASG,YAAT,CAAuBnB,UAAvB,EAAmC3H,MAAnC,EAA2C+I,CAA3C,EAA8CC,CAA9C,EAAiD;AAC/C,YAAIa,UAAU,GAAGlG,CAAC,CAACa,SAAF,KAAgB,YAAjC;AACA,YAAIqE,SAAS,GAAG7I,MAAM,KAAK2H,UAAX,GAAwBmC,MAAM,EAA9B,GAAmCC,OAAO,EAA1D;AACA,eAAOlB,SAAP;;AAEA,iBAASkB,OAAT,GAAoB;AAAE;AACpB,cAAInH,GAAG,GAAG+E,UAAU,CAACqC,QAAX,CAAoBlN,MAA9B;AACA,cAAI2D,CAAJ;AACA,cAAI/B,EAAJ;AACA,cAAI4K,IAAJ;;AACA,eAAK7I,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmC,GAAhB,EAAqBnC,CAAC,EAAtB,EAA0B;AACxB/B,cAAE,GAAGiJ,UAAU,CAACqC,QAAX,CAAoBvJ,CAApB,CAAL;AACA6I,gBAAI,GAAG5K,EAAE,CAAC6K,qBAAH,EAAP;;AACA,gBAAIM,UAAU,IAAKP,IAAI,CAACzC,IAAL,GAAYyC,IAAI,CAACE,KAAL,GAAa,CAA1B,GAA+BT,CAAjD,EAAoD;AAAE,qBAAOrK,EAAP;AAAY;;AAClE,gBAAI,CAACmL,UAAD,IAAgBP,IAAI,CAACxC,GAAL,GAAWwC,IAAI,CAACI,MAAL,GAAc,CAA1B,GAA+BV,CAAlD,EAAqD;AAAE,qBAAOtK,EAAP;AAAY;AACpE;;AACD,iBAAO,IAAP;AACD;;AAED,iBAASoL,MAAT,GAAmB;AAAE;AACnB,cAAIR,IAAI,GAAGtJ,MAAM,CAACuJ,qBAAP,EAAX;;AACA,cAAIM,UAAJ,EAAgB;AACd,mBAAOI,OAAO,CAAClB,CAAC,GAAGO,IAAI,CAACzC,IAAL,GAAY4C,YAAY,CAACH,IAAD,CAAZ,GAAqB,CAAtC,CAAd;AACD;;AACD,iBAAOW,OAAO,CAACjB,CAAC,GAAGM,IAAI,CAACxC,GAAL,GAAW6C,aAAa,CAACL,IAAD,CAAb,GAAsB,CAAtC,CAAd;AACD;;AAED,iBAASW,OAAT,CAAkBC,KAAlB,EAAyB;AACvB,iBAAOA,KAAK,GAAG7C,MAAM,CAACrH,MAAD,CAAT,GAAoBA,MAAhC;AACD;AACF;;AAED,eAASsH,MAAT,CAAiB3G,IAAjB,EAAuBwJ,SAAvB,EAAkC;AAChC,eAAO,OAAOxG,CAAC,CAACS,IAAT,KAAkB,SAAlB,GAA8BT,CAAC,CAACS,IAAhC,GAAuCT,CAAC,CAACS,IAAF,CAAOzD,IAAP,EAAawJ,SAAb,CAA9C;AACD;AACF;;AAED,aAAS7E,MAAT,CAAiB5G,EAAjB,EAAqB2G,EAArB,EAAyB9I,IAAzB,EAA+BZ,EAA/B,EAAmC;AACjC,UAAIyO,KAAK,GAAG;AACVC,eAAO,EAAE,UADC;AAEVC,iBAAS,EAAE,YAFD;AAGVC,iBAAS,EAAE;AAHD,OAAZ;AAKA,UAAIC,QAAQ,GAAG;AACbH,eAAO,EAAE,WADI;AAEbC,iBAAS,EAAE,aAFE;AAGbC,iBAAS,EAAE;AAHE,OAAf;AAKA,UAAIE,SAAS,GAAG;AACdJ,eAAO,EAAE,aADK;AAEdC,iBAAS,EAAE,eAFG;AAGdC,iBAAS,EAAE;AAHG,OAAhB;;AAKA,UAAI3M,MAAM,CAAC8M,SAAP,CAAiBC,cAArB,EAAqC;AACnCpI,iBAAS,CAAC8C,EAAD,CAAT,CAAc3G,EAAd,EAAkB8L,QAAQ,CAACjO,IAAD,CAA1B,EAAkCZ,EAAlC;AACD,OAFD,MAEO,IAAIiC,MAAM,CAAC8M,SAAP,CAAiBE,gBAArB,EAAuC;AAC5CrI,iBAAS,CAAC8C,EAAD,CAAT,CAAc3G,EAAd,EAAkB+L,SAAS,CAAClO,IAAD,CAA3B,EAAmCZ,EAAnC;AACD,OAFM,MAEA;AACL4G,iBAAS,CAAC8C,EAAD,CAAT,CAAc3G,EAAd,EAAkB0L,KAAK,CAAC7N,IAAD,CAAvB,EAA+BZ,EAA/B;AACA4G,iBAAS,CAAC8C,EAAD,CAAT,CAAc3G,EAAd,EAAkBnC,IAAlB,EAAwBZ,EAAxB;AACD;AACF;;AAED,aAASqK,gBAAT,CAA2B7G,CAA3B,EAA8B;AAC5B,UAAIA,CAAC,CAAC0L,OAAF,KAAc,KAAK,CAAvB,EAA0B;AAAE,eAAO1L,CAAC,CAAC0L,OAAF,CAAU/N,MAAjB;AAA0B;;AACtD,UAAIqC,CAAC,CAACmB,KAAF,KAAY,KAAK,CAAjB,IAAsBnB,CAAC,CAACmB,KAAF,KAAY,CAAtC,EAAyC;AAAE,eAAOnB,CAAC,CAACmB,KAAT;AAAiB,OAFhC,CAEiC;;;AAC7D,UAAInB,CAAC,CAAC2L,OAAF,KAAc,KAAK,CAAvB,EAA0B;AAAE,eAAO3L,CAAC,CAAC2L,OAAT;AAAmB;;AAC/C,UAAIC,MAAM,GAAG5L,CAAC,CAAC4L,MAAf;;AACA,UAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAE;AACvB,eAAOA,MAAM,GAAG,CAAT,GAAa,CAAb,GAAiBA,MAAM,GAAG,CAAT,GAAa,CAAb,GAAkBA,MAAM,GAAG,CAAT,GAAa,CAAb,GAAiB,CAA3D;AACD;AACF;;AAED,aAASnE,SAAT,CAAoBlI,EAApB,EAAwB;AACtB,UAAI4K,IAAI,GAAG5K,EAAE,CAAC6K,qBAAH,EAAX;AACA,aAAO;AACL1C,YAAI,EAAEyC,IAAI,CAACzC,IAAL,GAAYmE,SAAS,CAAC,YAAD,EAAe,aAAf,CADtB;AAELlE,WAAG,EAAEwC,IAAI,CAACxC,GAAL,GAAWkE,SAAS,CAAC,WAAD,EAAc,aAAd;AAFpB,OAAP;AAID;;AAED,aAASA,SAAT,CAAoBC,UAApB,EAAgCC,UAAhC,EAA4C;AAC1C,UAAI,OAAOtN,MAAM,CAACsN,UAAD,CAAb,KAA8B,WAAlC,EAA+C;AAC7C,eAAOtN,MAAM,CAACsN,UAAD,CAAb;AACD;;AACD,UAAIzI,eAAe,CAAC0I,YAApB,EAAkC;AAChC,eAAO1I,eAAe,CAACwI,UAAD,CAAtB;AACD;;AACD,aAAOtN,GAAG,CAACgH,IAAJ,CAASsG,UAAT,CAAP;AACD;;AAED,aAASvD,qBAAT,CAAgC0D,KAAhC,EAAuCrC,CAAvC,EAA0CC,CAA1C,EAA6C;AAC3C,UAAI9H,CAAC,GAAGkK,KAAK,IAAI,EAAjB;AACA,UAAIC,KAAK,GAAGnK,CAAC,CAACW,SAAd;AACA,UAAInD,EAAJ;AACAwC,OAAC,CAACW,SAAF,IAAe,UAAf;AACAnD,QAAE,GAAGf,GAAG,CAAC8I,gBAAJ,CAAqBsC,CAArB,EAAwBC,CAAxB,CAAL;AACA9H,OAAC,CAACW,SAAF,GAAcwJ,KAAd;AACA,aAAO3M,EAAP;AACD;;AAED,aAASyF,KAAT,GAAkB;AAAE,aAAO,KAAP;AAAe;;AACnC,aAASN,MAAT,GAAmB;AAAE,aAAO,IAAP;AAAc;;AACnC,aAAS4F,YAAT,CAAuBH,IAAvB,EAA6B;AAAE,aAAOA,IAAI,CAACE,KAAL,IAAeF,IAAI,CAACgC,KAAL,GAAahC,IAAI,CAACzC,IAAxC;AAAgD;;AAC/E,aAAS8C,aAAT,CAAwBL,IAAxB,EAA8B;AAAE,aAAOA,IAAI,CAACI,MAAL,IAAgBJ,IAAI,CAACiC,MAAL,GAAcjC,IAAI,CAACxC,GAA1C;AAAiD;;AACjF,aAASI,SAAT,CAAoBxI,EAApB,EAAwB;AAAE,aAAOA,EAAE,CAAC8M,UAAH,KAAkB7N,GAAlB,GAAwB,IAAxB,GAA+Be,EAAE,CAAC8M,UAAzC;AAAsD;;AAChF,aAASnF,OAAT,CAAkB3H,EAAlB,EAAsB;AAAE,aAAOA,EAAE,CAAC+M,OAAH,KAAe,OAAf,IAA0B/M,EAAE,CAAC+M,OAAH,KAAe,UAAzC,IAAuD/M,EAAE,CAAC+M,OAAH,KAAe,QAAtE,IAAkFC,UAAU,CAAChN,EAAD,CAAnG;AAA0G;;AAClI,aAASgN,UAAT,CAAqBhN,EAArB,EAAyB;AACvB,UAAI,CAACA,EAAL,EAAS;AAAE,eAAO,KAAP;AAAe,OADH,CACI;;;AAC3B,UAAIA,EAAE,CAACiN,eAAH,KAAuB,OAA3B,EAAoC;AAAE,eAAO,KAAP;AAAe,OAF9B,CAE+B;;;AACtD,UAAIjN,EAAE,CAACiN,eAAH,KAAuB,MAA3B,EAAmC;AAAE,eAAO,IAAP;AAAc,OAH5B,CAG6B;;;AACpD,aAAOD,UAAU,CAACxE,SAAS,CAACxI,EAAD,CAAV,CAAjB,CAJuB,CAIW;AACnC;;AAED,aAAS2I,MAAT,CAAiB3I,EAAjB,EAAqB;AACnB,aAAOA,EAAE,CAACkN,kBAAH,IAAyBC,QAAQ,EAAxC;;AACA,eAASA,QAAT,GAAqB;AACnB,YAAIrD,OAAO,GAAG9J,EAAd;;AACA,WAAG;AACD8J,iBAAO,GAAGA,OAAO,CAACsD,WAAlB;AACD,SAFD,QAEStD,OAAO,IAAIA,OAAO,CAACuD,QAAR,KAAqB,CAFzC;;AAGA,eAAOvD,OAAP;AACD;AACF;;AAED,aAASwD,YAAT,CAAuB7M,CAAvB,EAA0B;AACxB;AACA;AACA;AACA,UAAIA,CAAC,CAAC8M,aAAF,IAAmB9M,CAAC,CAAC8M,aAAF,CAAgBnP,MAAvC,EAA+C;AAC7C,eAAOqC,CAAC,CAAC8M,aAAF,CAAgB,CAAhB,CAAP;AACD;;AACD,UAAI9M,CAAC,CAAC+M,cAAF,IAAoB/M,CAAC,CAAC+M,cAAF,CAAiBpP,MAAzC,EAAiD;AAC/C,eAAOqC,CAAC,CAAC+M,cAAF,CAAiB,CAAjB,CAAP;AACD;;AACD,aAAO/M,CAAP;AACD;;AAED,aAASoH,QAAT,CAAmB4F,KAAnB,EAA0BhN,CAA1B,EAA6B;AAC3B,UAAIiN,IAAI,GAAGJ,YAAY,CAAC7M,CAAD,CAAvB;AACA,UAAIkN,OAAO,GAAG;AACZC,aAAK,EAAE,SADK;AACM;AAClBC,aAAK,EAAE,SAFK,CAEK;;AAFL,OAAd;;AAIA,UAAIJ,KAAK,IAAIE,OAAT,IAAoB,EAAEF,KAAK,IAAIC,IAAX,CAApB,IAAwCC,OAAO,CAACF,KAAD,CAAP,IAAkBC,IAA9D,EAAoE;AAClED,aAAK,GAAGE,OAAO,CAACF,KAAD,CAAf;AACD;;AACD,aAAOC,IAAI,CAACD,KAAD,CAAX;AACD;;AAEDnR,UAAM,CAACC,OAAP,GAAiByH,OAAjB;;;;;;;;;;;;;;;;AC/lBA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAMA;;;;;;QAKM8J,K;AACF;;;;;AAKA,mBAAYC,IAAZ,EAAkB7H,KAAlB,EAAyB1I,OAAzB,EAAkC;AAAA;;AAC9B,WAAKuQ,IAAL,GAAYA,IAAZ;AACA,WAAK7H,KAAL,GAAaA,KAAb;AACA,WAAK1I,OAAL,GAAeA,OAAf;AACA,WAAKwQ,UAAL,GAAkB,KAAlB;AACH,K;AAGL;;;;;AAIA;;;AACA,QAAMC,UAAU,GAAG;AACfC,YAAM,EAAE,QADO;AAEfC,YAAM,EAAE,QAFO;AAGfC,UAAI,EAAE,MAHS;AAIfC,aAAO,EAAE,SAJM;AAKfC,UAAI,EAAE,MALS;AAMfC,SAAG,EAAE,KANU;AAOfC,UAAI,EAAE,MAPS;AAQfC,YAAM,EAAE,QARO;AASfC,YAAM,EAAE,QATO;AAUfC,eAAS,EAAE,WAVI;AAWfC,iBAAW,EAAE;AAXE,KAAnB;AAaA;;AACA,QAAMC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYd,UAAZ,EAAwBe,GAAxB,CAA4B,UAAAC,CAAC;AAAA;AAAI;AAAkBhB,kBAAU;AAAC;AAAkBgB,SAAnB;AAAhC;AAAA,KAA7B,CAAlB;AAEA;;;;;AAIA;;AACA,QAAMjL,OAAO,GAAG,kDAAwB,oCAAxC;;QACMkL,Y;AACF;;;AAGA,4BAA6B;AAAA,UAAjBC,KAAiB,uEAATnL,OAAS;;AAAA;;AACzB,WAAKmL,KAAL,GAAaA,KAAb;AACH,K;AAGL;;;;;AAIA;;;AACA,QAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,SAAD,EAAYC,cAAZ,EAA4BC,SAA5B;AAAA,aAA0C,UAACC,KAAD,EAAW;AACrE,eAAOA,KAAK,CAACC,IAAN,CAAW,8DAAO,gBAAqB;AAAA,cAAlBpO,KAAkB,QAAlBA,KAAkB;AAAA,cAAX0M,IAAW,QAAXA,IAAW;AAC1C,iBAAO1M,KAAK,KAAKgO,SAAV,KACCC,cAAc,KAAK3R,SAAnB,IAAgCoQ,IAAI,KAAKuB,cAD1C,CAAP;AAEH,SAHiB,CAAX,EAGH,2DAAI;AAAA,cAAGvB,IAAH,SAAGA,IAAH;AAAA,cAAS7Q,IAAT,SAASA,IAAT;AAAA,iBAAoBqS,SAAS,CAACxB,IAAD,EAAO7Q,IAAP,CAA7B;AAAA,SAAJ,CAHG,CAAP;AAIH,OALmB;AAAA,KAApB;AAMA;;;AACA,QAAMwS,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAC3B,IAAD;AAAA;AAAA,UAAQ/N,EAAR;AAAA,UAAYyL,SAAZ;AAAA,UAAuBhD,MAAvB;;AAAA,aAAoC;AAAEsF,YAAI,EAAJA,IAAF;AAAQ/N,UAAE,EAAFA,EAAR;AAAYyL,iBAAS,EAATA,SAAZ;AAAuBhD,cAAM,EAANA;AAAvB,OAApC;AAAA,KAAnC;;QACMkH,c;;;AACF;;;AAGA,gCAAiC;AAAA;;AAAA,YAArBC,YAAqB,uEAAN,IAAM;;AAAA;;AAC7B,aAAKA,YAAL,GAAoBA,YAApB;AACA,aAAKC,SAAL,GAAiB,IAAI,4CAAJ,EAAjB;;AACA,aAAKvH,IAAL,GAAY,UAACwH,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACG,IAAZ,EAAkB0B,SAAlB,EAA6B,UAAC/B,IAAD;AAAA;AAAA,gBAAQ/N,EAAR;AAAA,gBAAYyI,MAAZ;;AAAA,mBAAyB;AAAEsF,kBAAI,EAAJA,IAAF;AAAQ/N,gBAAE,EAAFA,EAAR;AAAYyI,oBAAM,EAANA;AAAZ,aAAzB;AAAA,WAA7B,CAA/B,CAAf;AAAA,SAAZ;;AACA,aAAKsH,OAAL,GAAe,UAACD,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACI,OAAZ,EAAqByB,SAArB,EAAgC,UAAC/B,IAAD;AAAA;AAAA,gBAAQ/N,EAAR;;AAAA,mBAAiB;AAAE+N,kBAAI,EAAJA,IAAF;AAAQ/N,gBAAE,EAAFA;AAAR,aAAjB;AAAA,WAAhC,CAA/B,CAAf;AAAA,SAAf;;AACA,aAAK8I,IAAL,GAAY,UAACgH,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACK,IAAZ,EAAkBwB,SAAlB,EAA6B,UAAC/B,IAAD,SAAyC;AAAA;AAAA,gBAAjC/N,EAAiC;AAAA,gBAA7BsB,MAA6B;AAAA,gBAArBmH,MAAqB;AAAA,gBAAbqB,OAAa;;AAC5H,mBAAO;AAAEiE,kBAAI,EAAJA,IAAF;AAAQ/N,gBAAE,EAAFA,EAAR;AAAYsB,oBAAM,EAANA,MAAZ;AAAoBmH,oBAAM,EAANA,MAApB;AAA4BqB,qBAAO,EAAPA;AAA5B,aAAP;AACH,WAFyD,CAA/B,CAAf;AAAA,SAAZ;;AAGA,aAAKkG,iBAAL,GAAyB,UAACX,SAAD;AAAA,iBAAe,UAACS,SAAD;AAAA,mBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACC,SAAD,EAAYS,SAAZ,EAAuBJ,0BAAvB,CAA/B,CAAf;AAAA,WAAf;AAAA,SAAzB;;AACA,aAAKtJ,MAAL,GAAc,KAAK4J,iBAAL,CAAuB/B,UAAU,CAACC,MAAlC,CAAd;AACA,aAAKrO,MAAL,GAAc,KAAKmQ,iBAAL,CAAuB/B,UAAU,CAACQ,MAAlC,CAAd;AACA,aAAKwB,MAAL,GAAc,KAAKD,iBAAL,CAAuB/B,UAAU,CAACS,MAAlC,CAAd;AACA,aAAKhE,IAAL,GAAY,KAAKsF,iBAAL,CAAuB/B,UAAU,CAACO,IAAlC,CAAZ;AACA,aAAK/D,GAAL,GAAW,KAAKuF,iBAAL,CAAuB/B,UAAU,CAACM,GAAlC,CAAX;;AACA,aAAK2B,MAAL,GAAc,UAACJ,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACE,MAAZ,EAAoB2B,SAApB,EAA+B,UAAC/B,IAAD,UAAwC;AAAA;AAAA,gBAAhCoC,KAAgC;AAAA,gBAAzBC,QAAyB;AAAA,gBAAfC,SAAe;;AAC/H,mBAAO;AAAEtC,kBAAI,EAAJA,IAAF;AAAQoC,mBAAK,EAALA,KAAR;AAAeC,sBAAQ,EAARA,QAAf;AAAyBC,uBAAS,EAATA;AAAzB,aAAP;AACH,WAF2D,CAA/B,CAAf;AAAA,SAAd;;AAGA,aAAKC,SAAL,GAAiB,UAACR,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACU,SAAZ,EAAuBmB,SAAvB,EAAkC,UAAC/B,IAAD,UAAmG;AAAA;AAAA,gBAA3F/N,EAA2F;AAAA,gBAAvFsB,MAAuF;AAAA,gBAA/EmH,MAA+E;AAAA,gBAAvEqB,OAAuE;AAAA,gBAA9D7H,IAA8D;AAAA,gBAAxDsO,WAAwD;AAAA,gBAA3CC,WAA2C;AAAA,gBAA9BC,WAA8B;AAAA,gBAAjBC,WAAiB;;AAChM,mBAAO;AAAE3C,kBAAI,EAAJA,IAAF;AAAQ/N,gBAAE,EAAFA,EAAR;AAAYsB,oBAAM,EAANA,MAAZ;AAAoBmH,oBAAM,EAANA,MAApB;AAA4BqB,qBAAO,EAAPA,OAA5B;AAAqC7H,kBAAI,EAAJA,IAArC;AAA2CsO,yBAAW,EAAXA,WAA3C;AAAwDC,yBAAW,EAAXA,WAAxD;AAAqEC,yBAAW,EAAXA,WAArE;AAAkFC,yBAAW,EAAXA;AAAlF,aAAP;AACH,WAF8D,CAA/B,CAAf;AAAA,SAAjB;;AAGA,aAAKC,WAAL,GAAmB,UAACb,SAAD;AAAA,iBAAe,KAAI,CAACD,SAAL,CAAeJ,IAAf,CAAoBL,WAAW,CAACnB,UAAU,CAACW,WAAZ,EAAyBkB,SAAzB,EAAoC,UAAC/B,IAAD,UAAmE;AAAA;AAAA,gBAA3D/N,EAA2D;AAAA,gBAAvDyL,SAAuD;AAAA,gBAA5ChD,MAA4C;AAAA,gBAApCxG,IAAoC;AAAA,gBAA9BsO,WAA8B;AAAA,gBAAjBE,WAAiB;;AACpK,mBAAO;AAAE1C,kBAAI,EAAJA,IAAF;AAAQ/N,gBAAE,EAAFA,EAAR;AAAYyL,uBAAS,EAATA,SAAZ;AAAuBhD,oBAAM,EAANA,MAAvB;AAA+BxG,kBAAI,EAAJA,IAA/B;AAAqCsO,yBAAW,EAAXA,WAArC;AAAkDE,yBAAW,EAAXA;AAAlD,aAAP;AACH,WAFgE,CAA/B,CAAf;AAAA,SAAnB;;AAGA,aAAKG,MAAL,GAAc,EAAd;;AACA,YAAI,KAAKhB,YAAL,KAAsB,IAA1B,EAAgC;AAC5B,eAAKA,YAAL,GAAoB,IAAIV,YAAJ,EAApB;AACH;AACJ;AACD;;;;;;;;;4BAKI2B,K,EAAO;AACP;AACA,cAAIC,aAAa,GAAG,KAAK9O,IAAL,CAAU6O,KAAK,CAAC9C,IAAhB,CAApB;;AACA,cAAI+C,aAAJ,EAAmB;AACf,kBAAM,IAAIC,KAAJ,CAAU,mBAAmBF,KAAK,CAAC9C,IAAzB,GAAgC,mBAA1C,CAAN;AACH;;AACD,eAAK6C,MAAL,CAAYC,KAAK,CAAC9C,IAAlB,IAA0B8C,KAA1B;AACA,eAAKG,YAAL,CAAkBH,KAAlB;AACA,eAAKI,WAAL,CAAiBJ,KAAjB;AACA,iBAAOA,KAAP;AACH;AACD;;;;;;;6BAIK9C,I,EAAM;AACP,iBAAO,KAAK6C,MAAL,CAAY7C,IAAZ,CAAP;AACH;AACD;;;;;;;gCAIQA,I,EAAM;AACV;AACA,cAAI8C,KAAK,GAAG,KAAK7O,IAAL,CAAU+L,IAAV,CAAZ;;AACA,cAAI,CAAC8C,KAAL,EAAY;AACR;AACH;;AACDA,eAAK,CAAC3K,KAAN,IAAe2K,KAAK,CAAC3K,KAAN,CAAYG,OAAZ,EAAf;AACA,iBAAO,KAAKuK,MAAL,CAAY7C,IAAZ,CAAP;AACH;AACD;;;;;;;;;;;;oCASYA,I,EAAMvQ,O,EAAS;AACvB,iBAAO,KAAKoC,GAAL,CAAS,IAAIkO,KAAJ,CAAUC,IAAV,EAAgB,KAAK6B,YAAL,CAAkBT,KAAlB,CAAwB,EAAxB,EAA4B3R,OAA5B,CAAhB,EAAsDA,OAAtD,CAAT,CAAP;AACH;AACD;;;;;;;6CAIuC;AAAA;;AAAA,cAAxBuQ,IAAwB,UAAxBA,IAAwB;AAAA,cAAlB7H,KAAkB,UAAlBA,KAAkB;AAAA,cAAX1I,OAAW,UAAXA,OAAW;;AACnC;AACA,cAAI0T,OAAJ;AACA;;AACA,cAAIC,SAAJ;AACA;;AACA,cAAIC,SAAJ;AACAlL,eAAK,CAACtI,EAAN,CAAS,QAAT,EAAmB,UAACoC,EAAD,EAAKyL,SAAL,EAAgBhD,MAAhB,EAA2B;AAC1C,gBAAI,CAACvC,KAAK,CAACmL,MAAX,EAAmB;AACf;AACH;AACD;;;AACA,gBAAId,WAAW,GAAGrK,KAAK,CAACmL,MAAN,CAAanL,KAAK,CAACX,UAAN,CAAiBhH,OAAjB,CAAyBkK,MAAzB,CAAb,CAAlB;AACA8H,uBAAW,GAAGA,WAAW,CAAC1T,KAAZ,CAAkB,CAAlB,CAAd;AACA;;AACA,gBAAMoF,IAAI,GAAGsO,WAAW,CAACjS,MAAZ,CAAmB6S,SAAnB,EAA8B,CAA9B,EAAiC,CAAjC,CAAb,CAR0C,CAS1C;AACA;;AACA,kBAAI,CAACtB,SAAL,CAAeyB,IAAf,CAAoB;AAChBjQ,mBAAK,EAAE4M,UAAU,CAACW,WADF;AAEhBb,kBAAI,EAAJA,IAFgB;AAGhB7Q,kBAAI,EAAE,CAAC8C,EAAD,EAAKyL,SAAL,EAAgBhD,MAAhB,EAAwBxG,IAAxB,EAA8BsO,WAA9B,EAA2CY,SAA3C;AAHU,aAApB;AAKH,WAhBD;AAiBAjL,eAAK,CAACtI,EAAN,CAAS,MAAT,EAAiB,UAACoC,EAAD,EAAKyI,MAAL,EAAgB;AAC7B,gBAAI,CAACvC,KAAK,CAACmL,MAAX,EAAmB;AACf;AACH;;AACDH,mBAAO,GAAGlR,EAAV;AACAmR,qBAAS,GAAG,MAAI,CAACI,UAAL,CAAgBvR,EAAhB,EAAoByI,MAApB,CAAZ;AACH,WAND;AAOAvC,eAAK,CAACtI,EAAN,CAAS,MAAT,EAAiB,UAAC4T,OAAD,EAAUlQ,MAAV,EAAkBmH,MAAlB,EAA0BqB,OAA1B,EAAsC;AACnD,gBAAI,CAAC5D,KAAK,CAACmL,MAAP,IAAiB,CAAC/P,MAAtB,EAA8B;AAC1B;AACH;;AACD8P,qBAAS,GAAG,MAAI,CAACG,UAAL,CAAgBC,OAAhB,EAAyBlQ,MAAzB,CAAZ;AACA;;AACA,gBAAIiP,WAAW,GAAGrK,KAAK,CAACmL,MAAN,CAAanL,KAAK,CAACX,UAAN,CAAiBhH,OAAjB,CAAyBkK,MAAzB,CAAb,CAAlB;AACA;;AACA,gBAAI+H,WAAW,GAAGtK,KAAK,CAACmL,MAAN,CAAanL,KAAK,CAACX,UAAN,CAAiBhH,OAAjB,CAAyB+C,MAAzB,CAAb,CAAlB;AACA;;AACA,gBAAIW,IAAJ;;AACA,gBAAIX,MAAM,KAAKmH,MAAf,EAAuB;AACnB8H,yBAAW,GAAGA,WAAW,CAAC1T,KAAZ,CAAkB,CAAlB,CAAd;AACAoF,kBAAI,GAAGsO,WAAW,CAACjS,MAAZ,CAAmB6S,SAAnB,EAA8B,CAA9B,EAAiC,CAAjC,CAAP;AACAZ,yBAAW,CAACjS,MAAZ,CAAmB8S,SAAnB,EAA8B,CAA9B,EAAiCnP,IAAjC,EAHmB,CAInB;AACA;;AACAuO,yBAAW,GAAGD,WAAd;AACH,aAPD,MAQK;AACD;AACA,kBAAIkB,SAAS,GAAGP,OAAO,KAAKM,OAA5B;AACAvP,kBAAI,GAAGsO,WAAW,CAACY,SAAD,CAAlB;;AACA,kBAAIM,SAAJ,EAAe;AACX,oBAAI,CAACjU,OAAO,CAACkU,QAAb,EAAuB;AACnB,wBAAM,IAAIX,KAAJ,CAAU,gFAAV,CAAN;AACH;;AACD9O,oBAAI,GAAGzE,OAAO,CAACkU,QAAR,CAAiBzP,IAAjB,CAAP;AACH;;AACD,kBAAI,CAACwP,SAAL,EAAgB;AACZlB,2BAAW,GAAGA,WAAW,CAAC1T,KAAZ,CAAkB,CAAlB,CAAd;AACA0T,2BAAW,CAACjS,MAAZ,CAAmB6S,SAAnB,EAA8B,CAA9B;AACH;;AACDX,yBAAW,GAAGA,WAAW,CAAC3T,KAAZ,CAAkB,CAAlB,CAAd;AACA2T,yBAAW,CAAClS,MAAZ,CAAmB8S,SAAnB,EAA8B,CAA9B,EAAiCnP,IAAjC;;AACA,kBAAIwP,SAAJ,EAAe;AACX,oBAAI;AACAnQ,wBAAM,CAAC8H,WAAP,CAAmBoI,OAAnB;AACH,iBAFD,CAGA,OAAO/Q,CAAP,EAAU,CAAG;AAChB;AACJ;;AACD,kBAAI,CAACoP,SAAL,CAAeyB,IAAf,CAAoB;AAChBjQ,mBAAK,EAAE4M,UAAU,CAACU,SADF;AAEhBZ,kBAAI,EAAJA,IAFgB;AAGhB7Q,kBAAI,EAAE,CAACsU,OAAD,EAAUlQ,MAAV,EAAkBmH,MAAlB,EAA0BqB,OAA1B,EAAmC7H,IAAnC,EAAyCsO,WAAzC,EAAsDC,WAAtD,EAAmEW,SAAnE,EAA8EC,SAA9E;AAHU,aAApB;AAKH,WA/CD;AAgDH;AACD;;;;;;;oCAIYP,K,EAAO;AAAA;;AACf,cAAIA,KAAK,CAAC7C,UAAV,EAAsB;AAClB;AACH;;AACD6C,eAAK,CAAC7C,UAAN,GAAmB,IAAnB;AACA;;AACA,cAAMD,IAAI,GAAG8C,KAAK,CAAC9C,IAAnB;AACA;;AACA,cAAIzQ,OAAO,GAAG,SAAVA,OAAU,CAAC+D,KAAD,EAAW;AACrBwP,iBAAK,CAAC3K,KAAN,CAAYtI,EAAZ,CAAeyD,KAAf,EAAsB,YAAa;AAAA,gDAATnE,IAAS;AAATA,oBAAS;AAAA;;AAC/B,oBAAI,CAAC2S,SAAL,CAAeyB,IAAf,CAAoB;AAAEjQ,qBAAK,EAALA,KAAF;AAAS0M,oBAAI,EAAJA,IAAT;AAAe7Q,oBAAI,EAAJA;AAAf,eAApB;AACH,aAFD;AAGH,WAJD;;AAKA2R,mBAAS,CAACjQ,OAAV,CAAkBtB,OAAlB;AACH;AACD;;;;;;;;mCAKWqU,K,EAAOxI,M,EAAQ;AACtB,iBAAOxM,KAAK,CAACC,SAAN,CAAgB2B,OAAhB,CAAwBzB,IAAxB,CAA6BqM,MAAM,CAACmC,QAApC,EAA8CqG,KAA9C,CAAP;AACH;;;;;;AAELhC,kBAAc,CAACiC,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,aAAO,KAAKA,CAAC,IAAInC,cAAV,EAA0B,uDAAgBT,YAAhB,EAA8B,CAA9B,CAA1B,CAAP;AAAqE,KAAhI;;AACAS,kBAAc,CAACoC,KAAf,GAAuB,iEAA0B;AAAEC,WAAK,EAAErC,cAAT;AAAyBsC,aAAO,EAAEtC,cAAc,CAACiC;AAAjD,KAA1B,CAAvB;AACA;;AACAjC,kBAAc,CAACuC,cAAf,GAAgC;AAAA,aAAM,CAClC;AAAErU,YAAI,EAAEqR,YAAR;AAAsBiD,kBAAU,EAAE,CAAC;AAAEtU,cAAI,EAAE;AAAR,SAAD;AAAlC,OADkC,CAAN;AAAA,KAAhC;AAGA;;;AAAc,KAAC,YAAY;AAAE,sEAAyB8R,cAAzB,EAAyC,CAAC;AAC/D9R,YAAI,EAAE;AADyD,OAAD,CAAzC,EAErB,YAAY;AAAE,eAAO,CAAC;AAAEA,cAAI,EAAEqR,YAAR;AAAsBiD,oBAAU,EAAE,CAAC;AACjDtU,gBAAI,EAAE;AAD2C,WAAD;AAAlC,SAAD,CAAP;AAEF,OAJS,EAIP,IAJO;AAIC,KAJhB;AAMd;;;;;;QAIMuU,gB;;;AACF;;;;AAIA,gCAAYpS,EAAZ,EAAgBqS,cAAhB,EAAgC;AAAA;;AAC5B,aAAKrS,EAAL,GAAUA,EAAV;AACA,aAAKqS,cAAL,GAAsBA,cAAtB;AACA,aAAKC,kBAAL,GAA0B,IAAI,0DAAJ,EAA1B;AACH;AACD;;;;;;;;AAMA;;;;oCAIYC,O,EAAS;AACjB,cAAIA,OAAO,IAAIA,OAAO,CAACvO,OAAvB,EAAgC;AAAA,mCACwCuO,OAAO,CAACvO,OADhD;AAAA,gBACLwO,IADK,oBACpBC,aADoB;AAAA,gBACejP,OADf,oBACCkP,YADD;AAAA,gBACwBC,WADxB,oBACwBA,WADxB;AAE5B;;AACA,gBAAIC,gBAAgB,GAAG,CAAC,CAACJ,IAAzB;AACA;;AACA,gBAAIK,WAAW,GAAG,CAAC,CAACrP,OAApB,CAL4B,CAM5B;AACA;AACA;AACA;AACA;;AACA,gBAAIoP,gBAAJ,EAAsB;AAClB,mBAAKE,QAAL,CAAcN,IAAd;AACH;;AACD,gBAAIK,WAAJ,EAAiB;AACb,mBAAKE,KAAL;AACH;AACJ,WAjBD,MAkBK,IAAIR,OAAO,IAAIA,OAAO,CAACS,YAAvB,EAAqC;AAAA,wCAC8BT,OAAO,CAACS,YADtC;AAAA,gBACfR,KADe,yBAC9BC,aAD8B;AAAA,gBACKjP,QADL,yBACTkP,YADS;AAAA,gBACcC,YADd,yBACcA,WADd;AAAA,gBAE9BzM,KAF8B,GAEpB,KAAK2K,KAFe,CAE9B3K,KAF8B;;AAGtC,gBAAI,KAAKlC,OAAL,IAAgBkC,KAApB,EAA2B;AACvBA,mBAAK,CAACmL,MAAN,GAAenL,KAAK,CAACmL,MAAN,IAAgB,EAA/B;AACA;;AACA,kBAAI4B,SAAS,GAAG/M,KAAK,CAACmL,MAAN,CAAa9S,OAAb,CAAqBiU,KAArB,CAAhB;;AACA,kBAAIS,SAAS,KAAK,CAAC,CAAnB,EAAsB;AAClB;AACA/M,qBAAK,CAACmL,MAAN,CAAa/S,MAAb,CAAoB2U,SAApB,EAA+B,CAA/B,EAFkB,CAGlB;;AACA,oBAAI,CAAC,CAACzP,QAAN,EAAe;AACX0C,uBAAK,CAACmL,MAAN,CAAa/S,MAAb,CAAoB2U,SAApB,EAA+B,CAA/B,EAAkCzP,QAAlC;AACH;AACJ,eAPD,MAQK,IAAI,CAAC,CAACA,QAAN,EAAe;AAChB;AACA0C,qBAAK,CAACmL,MAAN,CAAavT,IAAb,CAAkB0F,QAAlB;AACH;AACJ;AACJ;AACJ;AACD;;;;;;gCAGQ;AAAA;;AACJ;AACA,cAAI0P,UAAU,GAAG,SAAbA,UAAa,CAACrC,KAAD,EAAW;AACxB,gBAAI,MAAI,CAACmC,YAAT,EAAuB;AACnB,kBAAInC,KAAK,CAAC3K,KAAN,CAAYmL,MAAhB,EAAwB;AACpBR,qBAAK,CAAC3K,KAAN,CAAYmL,MAAZ,CAAmBvT,IAAnB,CAAwB,MAAI,CAACkV,YAA7B;AACH,eAFD,MAGK;AACDnC,qBAAK,CAAC3K,KAAN,CAAYmL,MAAZ,GAAqB,CAAC,MAAI,CAAC2B,YAAN,CAArB;AACH;AACJ;AACJ,WATD;AAUA;;;AACA,cAAInC,KAAK,GAAG,KAAKwB,cAAL,CAAoBrQ,IAApB,CAAyB,KAAKgC,OAA9B,CAAZ;;AACA,cAAI,CAAC6M,KAAL,EAAY;AACR;AACA,gBAAIrT,OAAO,GAAG,EAAd;AACAqT,iBAAK,GAAG,KAAKwB,cAAL,CAAoBc,WAApB,CAAgC,KAAKnP,OAArC,EAA8CxG,OAA9C,CAAR;AACH,WAlBG,CAmBJ;;;AACA0V,oBAAU,CAACrC,KAAD,CAAV;AACAA,eAAK,CAAC3K,KAAN,CAAYX,UAAZ,CAAuBzH,IAAvB,CAA4B,KAAK2N,SAAjC;AACA,eAAK2H,SAAL,CAAe,KAAKpP,OAApB;AACA,eAAK6M,KAAL,GAAaA,KAAb;AACH;AACD;;;;;;;kCAIU9C,I,EAAM;AAAA;;AACZ,eAAKsF,IAAL,GAAY,IAAI,iDAAJ,EAAZ;AACA,eAAKA,IAAL,CAAUzT,GAAV,CAAc,KAAKyS,cAAL,CACT/B,SADS,CACCvC,IADD,EAETqF,SAFS,CAEC,kBAAkD;AAAA,gBAA/C3K,MAA+C,UAA/CA,MAA+C;AAAA,gBAAvCnH,MAAuC,UAAvCA,MAAuC;AAAA,gBAA/BiP,WAA+B,UAA/BA,WAA+B;AAAA,gBAAlBC,WAAkB,UAAlBA,WAAkB;;AAC7D,gBAAI/H,MAAM,KAAK,MAAI,CAACzI,EAAL,CAAQsT,aAAvB,EAAsC;AAClC,oBAAI,CAAChB,kBAAL,CAAwB9T,IAAxB,CAA6B+R,WAA7B;AACH,aAFD,MAGK,IAAIjP,MAAM,KAAK,MAAI,CAACtB,EAAL,CAAQsT,aAAvB,EAAsC;AACvC,oBAAI,CAAChB,kBAAL,CAAwB9T,IAAxB,CAA6BgS,WAA7B;AACH;AACJ,WATa,CAAd;AAUA,eAAK6C,IAAL,CAAUzT,GAAV,CAAc,KAAKyS,cAAL,CACT1B,WADS,CACG5C,IADH,EAETqF,SAFS,CAEC,kBAA6B;AAAA,gBAA1B3K,MAA0B,UAA1BA,MAA0B;AAAA,gBAAlB8H,WAAkB,UAAlBA,WAAkB;;AACxC,gBAAI9H,MAAM,KAAK,MAAI,CAACzI,EAAL,CAAQsT,aAAvB,EAAsC;AAClC,oBAAI,CAAChB,kBAAL,CAAwB9T,IAAxB,CAA6B+R,WAA7B;AACH;AACJ,WANa,CAAd;AAOH;AACD;;;;;;;iCAIST,S,EAAW;AAChB,cAAI,KAAKuD,IAAT,EAAe;AACX,iBAAKA,IAAL,CAAUE,WAAV;AACH;AACD;;;AACA,cAAM1C,KAAK,GAAG,KAAKwB,cAAL,CAAoBrQ,IAApB,CAAyB8N,SAAzB,CAAd;;AACA,cAAIe,KAAJ,EAAW;AACP;AACA,gBAAM2C,YAAY,GAAG3C,KAAK,CAAC3K,KAAN,CAAYX,UAAZ,CAAuBhH,OAAvB,CAA+B,KAAKyB,EAAL,CAAQsT,aAAvC,CAArB;;AACA,gBAAIE,YAAY,KAAK,CAAC,CAAtB,EAAyB;AACrB3C,mBAAK,CAAC3K,KAAN,CAAYX,UAAZ,CAAuBjH,MAAvB,CAA8BkV,YAA9B,EAA4C,CAA5C;AACH;;AACD,gBAAI,KAAKR,YAAL,IAAqBnC,KAAK,CAAC3K,KAA3B,IAAoC2K,KAAK,CAAC3K,KAAN,CAAYmL,MAApD,EAA4D;AACxD;AACA,kBAAIoC,UAAU,GAAG5C,KAAK,CAAC3K,KAAN,CAAYmL,MAAZ,CAAmB9S,OAAnB,CAA2B,KAAKyU,YAAhC,CAAjB;;AACA,kBAAIS,UAAU,KAAK,CAAC,CAApB,EAAuB;AACnB5C,qBAAK,CAAC3K,KAAN,CAAYmL,MAAZ,CAAmB/S,MAAnB,CAA0BmV,UAA1B,EAAsC,CAAtC;AACH;AACJ;AACJ;AACJ;AACD;;;;;;sCAGc;AACV,eAAKX,QAAL,CAAc,KAAK9O,OAAnB;AACH;;;4BAlIe;AACZ,iBAAO,KAAKhE,EAAL,IAAW,KAAKA,EAAL,CAAQsT,aAA1B;AACH;;;;;;AAkILlB,oBAAgB,CAACR,IAAjB,GAAwB,SAAS8B,wBAAT,CAAkC5B,CAAlC,EAAqC;AAAE,aAAO,KAAKA,CAAC,IAAIM,gBAAV,EAA4B,gEAAyB,wDAAzB,CAA5B,EAAyE,gEAAyBzC,cAAzB,CAAzE,CAAP;AAA4H,KAA3L;;AACAyC,oBAAgB,CAACuB,IAAjB,GAAwB,gEAAyB;AAAE9V,UAAI,EAAEuU,gBAAR;AAA0BwB,eAAS,EAAE,CAAC,CAAC,EAAD,EAAK,SAAL,EAAgB,EAAhB,CAAD,CAArC;AAA4DC,YAAM,EAAE;AAAE7P,eAAO,EAAE,SAAX;AAAsBgP,oBAAY,EAAE;AAApC,OAApE;AAA0Hc,aAAO,EAAE;AAAExB,0BAAkB,EAAE;AAAtB,OAAnI;AAAiLyB,cAAQ,EAAE,CAAC,oEAAD;AAA3L,KAAzB,CAAxB;AACA;;AACA3B,oBAAgB,CAACF,cAAjB,GAAkC;AAAA,aAAM,CACpC;AAAErU,YAAI,EAAE;AAAR,OADoC,EAEpC;AAAEA,YAAI,EAAE8R;AAAR,OAFoC,CAAN;AAAA,KAAlC;;AAIAyC,oBAAgB,CAAC4B,cAAjB,GAAkC;AAC9BhQ,aAAO,EAAE,CAAC;AAAEnG,YAAI,EAAE;AAAR,OAAD,CADqB;AAE9BmV,kBAAY,EAAE,CAAC;AAAEnV,YAAI,EAAE;AAAR,OAAD,CAFgB;AAG9ByU,wBAAkB,EAAE,CAAC;AAAEzU,YAAI,EAAE;AAAR,OAAD;AAHU,KAAlC;AAKA;;AAAc,KAAC,YAAY;AAAE,sEAAyBuU,gBAAzB,EAA2C,CAAC;AACjEvU,YAAI,EAAE,uDAD2D;AAEjEX,YAAI,EAAE,CAAC;AAAE+W,kBAAQ,EAAE;AAAZ,SAAD;AAF2D,OAAD,CAA3C,EAGrB,YAAY;AAAE,eAAO,CAAC;AAAEpW,cAAI,EAAE;AAAR,SAAD,EAA8B;AAAEA,cAAI,EAAE8R;AAAR,SAA9B,CAAP;AAAiE,OAH1D,EAG4D;AAAE2C,0BAAkB,EAAE,CAAC;AACpGzU,cAAI,EAAE;AAD8F,SAAD,CAAtB;AAE7EmG,eAAO,EAAE,CAAC;AACVnG,cAAI,EAAE;AADI,SAAD,CAFoE;AAI7EmV,oBAAY,EAAE,CAAC;AACfnV,cAAI,EAAE;AADS,SAAD;AAJ+D,OAH5D;AASb,KATF;AAWd;;;;;;QAIMqW,a;;;;;;;;;;AACF;;;kCAGiB;AACb,iBAAO;AACHC,oBAAQ,EAAED,aADP;AAEHE,qBAAS,EAAE,CAACzE,cAAD;AAFR,WAAP;AAIH;;;;;;AAELuE,iBAAa,CAACG,IAAd,GAAqB,+DAAwB;AAAExW,UAAI,EAAEqW;AAAR,KAAxB,CAArB;AACAA,iBAAa,CAACI,IAAd,GAAqB,+DAAwB;AAAErC,aAAO,EAAE,SAASsC,qBAAT,CAA+BzC,CAA/B,EAAkC;AAAE,eAAO,KAAKA,CAAC,IAAIoC,aAAV,GAAP;AAAoC;AAAnF,KAAxB,CAArB;;AACA,KAAC,YAAY;AAAE,OAAC,OAAOM,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD,iEAA0BN,aAA1B,EAAyC;AAAEO,oBAAY,EAAE,CAACrC,gBAAD,CAAhB;AAAoC7V,eAAO,EAAE,CAAC6V,gBAAD;AAA7C,OAAzC,CAAnD;AAAiK,KAAhL;AACA;;;AAAc,KAAC,YAAY;AAAE,sEAAyB8B,aAAzB,EAAwC,CAAC;AAC9DrW,YAAI,EAAE,sDADwD;AAE9DX,YAAI,EAAE,CAAC;AACCX,iBAAO,EAAE,CAAC6V,gBAAD,CADV;AAECqC,sBAAY,EAAE,CAACrC,gBAAD;AAFf,SAAD;AAFwD,OAAD,CAAxC,EAMrB,IANqB,EAMf,IANe;AAMP,KANR;AAQd;;;;;AAIA;;;AACA,QAAMsC,gBAAgB,GAAG,IAAIxF,YAAJ,CAAiB,UAAC3J,UAAD,EAAa/H,OAAb,EAAyB;AAC/D,aAAO,IAAImX,SAAJ,CAAcpP,UAAd,EAA0B/H,OAA1B,CAAP;AACH,KAFwB,CAAzB;AAGA;;;;;;;;;;;;;;;;;;QAiBMmX,S;;;AACF;;;;;;AAMA,2BAAmD;AAAA,YAAvCpP,UAAuC,uEAA1B,EAA0B;AAAA,YAAtB/H,OAAsB,uEAAZ,EAAY;AAAA,YAAR6T,MAAQ;;AAAA;;AAC/C,aAAK9L,UAAL,GAAkBA,UAAlB;AACA,aAAK/H,OAAL,GAAeA,OAAf;AACA,aAAK6T,MAAL,GAAcA,MAAd;AACA;;AACA,aAAK9K,QAAL,GAAgB,KAAhB;AACA,aAAKqO,QAAL,GAAgB,IAAI,4CAAJ,EAAhB;AACA,aAAKvB,IAAL,GAAY,IAAI,iDAAJ,EAAZ;AACH;AACD;;;;;;;;8BAIMpR,I,EAAM;AACR,eAAKsE,QAAL,GAAgB,IAAhB;AACH;AACD;;;;;;8BAGM;AACF,eAAKA,QAAL,GAAgB,KAAhB;AACH;AACD;;;;;;;+BAIOgD,M,EAAQ;AACX,eAAKhD,QAAL,GAAgB,KAAhB;AACH;AACD;;;;;;iCAGS;AACL,eAAKA,QAAL,GAAgB,KAAhB;AACH;AACD;;;;;;;;2BAKGlF,K,EAAOwT,Q,EAAU;AAChB,eAAKxB,IAAL,CAAUzT,GAAV,CAAc,KAAKgV,QAAL,CACTnF,IADS,CACJ,8DAAO;AAAA,gBAAGJ,SAAH,UAAGA,SAAH;AAAA,mBAAmBA,SAAS,KAAKhO,KAAjC;AAAA,WAAP,CADI,EAET+R,SAFS,CAEC,kBAAc;AAAA,gBAAXlW,IAAW,UAAXA,IAAW;AACzB2X,oBAAQ,MAAR,4BAAY3X,IAAZ;AACH,WAJa,CAAd;AAKH;AACD;;;;;;kCAGU;AACN,eAAKmW,IAAL,CAAUE,WAAV;AACH;AACD;;;;;;;;;;;;;;;;;6BAcKlE,S,EAAoB;AAAA,6CAANnS,IAAM;AAANA,gBAAM;AAAA;;AACrB,eAAK0X,QAAL,CAActD,IAAd,CAAmB;AAAEjC,qBAAS,EAATA,SAAF;AAAanS,gBAAI,EAAJA;AAAb,WAAnB;AACH;;;;;AAGL;;;;;AAKA;;;;AAOA;;;;;;;;;;;;;;;;AChlBA,QAAI4X,EAAE,GAAG,OAAOC,YAAP,KAAwB,UAAjC;AAAA,QAA6CC,IAA7C;;AACA,QAAIF,EAAJ,EAAQ;AACNE,UAAI,GAAG,cAAU/X,EAAV,EAAc;AAAE8X,oBAAY,CAAC9X,EAAD,CAAZ;AAAmB,OAA1C;AACD,KAFD,MAEO;AACL+X,UAAI,GAAG,cAAU/X,EAAV,EAAc;AAAEgY,kBAAU,CAAChY,EAAD,EAAK,CAAL,CAAV;AAAoB,OAA3C;AACD;;AAEDX,UAAM,CAACC,OAAP,GAAiByY,IAAjB;;;;;;;;;;;;;;;;ACPA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACQI;;AACI;;AACI;;AACI;;AACI;;AAA+B;;AAAQ;;AAC3C;;AACJ;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;;;;;AAP+C;;AAAA;;;;;;AAkBnC;;AACI;;AACJ;;;;;;AAFuC,yGAAqC,WAArC,EAAqC,sBAArC,EAAqC,SAArC,EAAqC,oBAArC;;;;;;AAcvC;;AACI;;AACJ;;;;;;AAFuC,yGAAqC,WAArC,EAAqC,sBAArC,EAAqC,SAArC,EAAqC,oBAArC;;;;QDnC1CE,iB,GAIX,2BAAmBC,WAAnB,EAA4C;AAAA;;AAAzB,WAAAA,WAAA,GAAAA,WAAA;AAHZ,WAAAC,KAAA,GAAQ,CAAE,MAAF,EAAU,QAAV,EAAoB,OAApB,EAA6B,MAA7B,EAAqC,MAArC,EAA6C,UAA7C,CAAR;AACA,WAAAC,MAAA,GAAS,CAAE,QAAF,EAAY,SAAZ,EAAuB,MAAvB,CAAT;AAGL,WAAKC,QAAL,GAAgB,KAAKH,WAAL,CAAiBG,QAAjC;AACD,K;;;uBANUJ,iB,EAAiB,0H;AAAA,K;;;YAAjBA,iB;AAAiB,oC;AAAA,e;AAAA,c;AAAA,6e;AAAA;AAAA;ACT9B;;AAOA;;AACI;;AAYJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AACI;;AAAI;;AAAe;;AACvB;;AACJ;;AACA;;AACI;;AAGJ;;AACJ;;AACJ;;AACA;;AACI;;AACI;;AACI;;AACI;;AAAI;;AAAgB;;AACxB;;AACJ;;AACA;;AACI;;AAGJ;;AACJ;;AACJ;;AACJ;;;;AA7CI;;AAJA,oFAAgB,OAAhB,EAAgB,aAAhB,EAAgB,gBAAhB,EAAgB,KAAhB,EAAgB,YAAhB,EAAgB,IAAhB;;AAM0C;;AAAA;;AACrC;;AAAA;;AAqBqB;;AAAA;;AACJ;;AAAA;;AAaI;;AAAA;;AACJ;;AAAA;;;;;;;;;sEDnCbA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTjB,kBAAQ,EAAE,eADD;AAETsB,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;AET9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAOO,QAAMC,MAAM,GAAG,CACpB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE,sEAAvB;AAA0CC,eAAS,EAAE;AAArD,KADoB,CAAf;;QAeMC,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,gBAVhB,CACP,4DADO,EAEP,6DAAaC,QAAb,CAAsBL,MAAtB,CAFO,EAGP,0DAAcM,OAAd,EAHO,EAIP,kEAJO,CAUgB;;;;0HAAdF,c,EAAc;AAAA,uBAHvB,sEAGuB;AAHN,kBANjB,4DAMiB,EANL,4DAMK,EANL,yDAMK,EAHjB,kEAGiB;AAGM,O;AANX,K;;;;;sEAMHA,c,EAAc;cAX1B,sDAW0B;eAXjB;AACRG,iBAAO,EAAE,CACP,4DADO,EAEP,6DAAaF,QAAb,CAAsBL,MAAtB,CAFO,EAGP,0DAAcM,OAAd,EAHO,EAIP,kEAJO,CADD;AAORtB,sBAAY,EAAE,CACZ,sEADY;AAPN,S;AAWiB,Q","file":"pages-drag-drop-drag-drop-module-es5.js","sourcesContent":["module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n","'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar cache = {};\nvar start = '(?:^|\\\\s)';\nvar end = '(?:\\\\s|$)';\n\nfunction lookupClass (className) {\n  var cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cache[className] = cached = new RegExp(start + className + end, 'g');\n  }\n  return cached;\n}\n\nfunction addClass (el, className) {\n  var current = el.className;\n  if (!current.length) {\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    el.className += ' ' + className;\n  }\n}\n\nfunction rmClass (el, className) {\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass\n};\n","'use strict';\n\nvar emitter = require('contra/emitter');\nvar crossvent = require('crossvent');\nvar classes = require('./classes');\nvar doc = document;\nvar documentElement = doc.documentElement;\n\nfunction dragula (initialContainers, options) {\n  var len = arguments.length;\n  if (len === 1 && Array.isArray(initialContainers) === false) {\n    options = initialContainers;\n    initialContainers = [];\n  }\n  var _mirror; // mirror image\n  var _source; // source container\n  var _item; // item being dragged\n  var _offsetX; // reference x\n  var _offsetY; // reference y\n  var _moveX; // reference move x\n  var _moveY; // reference move y\n  var _initialSibling; // reference sibling when grabbed\n  var _currentSibling; // reference sibling now\n  var _copy; // item used for copying\n  var _renderTimer; // timer for setTimeout renderMirrorImage\n  var _lastDropTarget = null; // last container item was over\n  var _grabbed; // holds mousedown context until first mousemove\n\n  var o = options || {};\n  if (o.moves === void 0) { o.moves = always; }\n  if (o.accepts === void 0) { o.accepts = always; }\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\n  if (o.isContainer === void 0) { o.isContainer = never; }\n  if (o.copy === void 0) { o.copy = false; }\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\n  if (o.direction === void 0) { o.direction = 'vertical'; }\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\n\n  var drake = emitter({\n    containers: o.containers,\n    start: manualStart,\n    end: end,\n    cancel: cancel,\n    remove: remove,\n    destroy: destroy,\n    canMove: canMove,\n    dragging: false\n  });\n\n  if (o.removeOnSpill === true) {\n    drake.on('over', spillOver).on('out', spillOut);\n  }\n\n  events();\n\n  return drake;\n\n  function isContainer (el) {\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\n  }\n\n  function events (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousedown', grab);\n    touchy(documentElement, op, 'mouseup', release);\n  }\n\n  function eventualMovements (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\n  }\n\n  function movements (remove) {\n    var op = remove ? 'remove' : 'add';\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\n    crossvent[op](documentElement, 'click', preventGrabbed);\n  }\n\n  function destroy () {\n    events(true);\n    release({});\n  }\n\n  function preventGrabbed (e) {\n    if (_grabbed) {\n      e.preventDefault();\n    }\n  }\n\n  function grab (e) {\n    _moveX = e.clientX;\n    _moveY = e.clientY;\n\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n    if (ignore) {\n      return; // we only care about honest-to-god left clicks and touch events\n    }\n    var item = e.target;\n    var context = canStart(item);\n    if (!context) {\n      return;\n    }\n    _grabbed = context;\n    eventualMovements();\n    if (e.type === 'mousedown') {\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n      } else {\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n      }\n    }\n  }\n\n  function startBecauseMouseMoved (e) {\n    if (!_grabbed) {\n      return;\n    }\n    if (whichMouseButton(e) === 0) {\n      release({});\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n    }\n    // truthy check fixes #239, equality fixes #207\n    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\n      return;\n    }\n    if (o.ignoreInputTextSelection) {\n      var clientX = getCoord('clientX', e);\n      var clientY = getCoord('clientY', e);\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n      if (isInput(elementBehindCursor)) {\n        return;\n      }\n    }\n\n    var grabbed = _grabbed; // call to end() unsets _grabbed\n    eventualMovements(true);\n    movements();\n    end();\n    start(grabbed);\n\n    var offset = getOffset(_item);\n    _offsetX = getCoord('pageX', e) - offset.left;\n    _offsetY = getCoord('pageY', e) - offset.top;\n\n    classes.add(_copy || _item, 'gu-transit');\n    renderMirrorImage();\n    drag(e);\n  }\n\n  function canStart (item) {\n    if (drake.dragging && _mirror) {\n      return;\n    }\n    if (isContainer(item)) {\n      return; // don't drag container itself\n    }\n    var handle = item;\n    while (getParent(item) && isContainer(getParent(item)) === false) {\n      if (o.invalid(item, handle)) {\n        return;\n      }\n      item = getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    var source = getParent(item);\n    if (!source) {\n      return;\n    }\n    if (o.invalid(item, handle)) {\n      return;\n    }\n\n    var movable = o.moves(item, source, handle, nextEl(item));\n    if (!movable) {\n      return;\n    }\n\n    return {\n      item: item,\n      source: source\n    };\n  }\n\n  function canMove (item) {\n    return !!canStart(item);\n  }\n\n  function manualStart (item) {\n    var context = canStart(item);\n    if (context) {\n      start(context);\n    }\n  }\n\n  function start (context) {\n    if (isCopy(context.item, context.source)) {\n      _copy = context.item.cloneNode(true);\n      drake.emit('cloned', _copy, context.item, 'copy');\n    }\n\n    _source = context.source;\n    _item = context.item;\n    _initialSibling = _currentSibling = nextEl(context.item);\n\n    drake.dragging = true;\n    drake.emit('drag', _item, _source);\n  }\n\n  function invalidTarget () {\n    return false;\n  }\n\n  function end () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    drop(item, getParent(item));\n  }\n\n  function ungrab () {\n    _grabbed = false;\n    eventualMovements(true);\n    movements(true);\n  }\n\n  function release (e) {\n    ungrab();\n\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\n      drop(item, dropTarget);\n    } else if (o.removeOnSpill) {\n      remove();\n    } else {\n      cancel();\n    }\n  }\n\n  function drop (item, target) {\n    var parent = getParent(item);\n    if (_copy && o.copySortSource && target === _source) {\n      parent.removeChild(_item);\n    }\n    if (isInitialPlacement(target)) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, target, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function remove () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var parent = getParent(item);\n    if (parent) {\n      parent.removeChild(item);\n    }\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\n    cleanup();\n  }\n\n  function cancel (revert) {\n    if (!drake.dragging) {\n      return;\n    }\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\n    var item = _copy || _item;\n    var parent = getParent(item);\n    var initial = isInitialPlacement(parent);\n    if (initial === false && reverts) {\n      if (_copy) {\n        if (parent) {\n          parent.removeChild(_copy);\n        }\n      } else {\n        _source.insertBefore(item, _initialSibling);\n      }\n    }\n    if (initial || reverts) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, parent, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function cleanup () {\n    var item = _copy || _item;\n    ungrab();\n    removeMirrorImage();\n    if (item) {\n      classes.rm(item, 'gu-transit');\n    }\n    if (_renderTimer) {\n      clearTimeout(_renderTimer);\n    }\n    drake.dragging = false;\n    if (_lastDropTarget) {\n      drake.emit('out', item, _lastDropTarget, _source);\n    }\n    drake.emit('dragend', item);\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\n  }\n\n  function isInitialPlacement (target, s) {\n    var sibling;\n    if (s !== void 0) {\n      sibling = s;\n    } else if (_mirror) {\n      sibling = _currentSibling;\n    } else {\n      sibling = nextEl(_copy || _item);\n    }\n    return target === _source && sibling === _initialSibling;\n  }\n\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\n    var target = elementBehindCursor;\n    while (target && !accepted()) {\n      target = getParent(target);\n    }\n    return target;\n\n    function accepted () {\n      var droppable = isContainer(target);\n      if (droppable === false) {\n        return false;\n      }\n\n      var immediate = getImmediateChild(target, elementBehindCursor);\n      var reference = getReference(target, immediate, clientX, clientY);\n      var initial = isInitialPlacement(target, reference);\n      if (initial) {\n        return true; // should always be able to drop it right back where it was\n      }\n      return o.accepts(_item, target, _source, reference);\n    }\n  }\n\n  function drag (e) {\n    if (!_mirror) {\n      return;\n    }\n    e.preventDefault();\n\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var x = clientX - _offsetX;\n    var y = clientY - _offsetY;\n\n    _mirror.style.left = x + 'px';\n    _mirror.style.top = y + 'px';\n\n    var item = _copy || _item;\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\n    if (changed || dropTarget === null) {\n      out();\n      _lastDropTarget = dropTarget;\n      over();\n    }\n    var parent = getParent(item);\n    if (dropTarget === _source && _copy && !o.copySortSource) {\n      if (parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    var reference;\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\n    if (immediate !== null) {\n      reference = getReference(dropTarget, immediate, clientX, clientY);\n    } else if (o.revertOnSpill === true && !_copy) {\n      reference = _initialSibling;\n      dropTarget = _source;\n    } else {\n      if (_copy && parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    if (\n      (reference === null && changed) ||\n      reference !== item &&\n      reference !== nextEl(item)\n    ) {\n      _currentSibling = reference;\n      dropTarget.insertBefore(item, reference);\n      drake.emit('shadow', item, dropTarget, _source);\n    }\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\n    function over () { if (changed) { moved('over'); } }\n    function out () { if (_lastDropTarget) { moved('out'); } }\n  }\n\n  function spillOver (el) {\n    classes.rm(el, 'gu-hide');\n  }\n\n  function spillOut (el) {\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\n  }\n\n  function renderMirrorImage () {\n    if (_mirror) {\n      return;\n    }\n    var rect = _item.getBoundingClientRect();\n    _mirror = _item.cloneNode(true);\n    _mirror.style.width = getRectWidth(rect) + 'px';\n    _mirror.style.height = getRectHeight(rect) + 'px';\n    classes.rm(_mirror, 'gu-transit');\n    classes.add(_mirror, 'gu-mirror');\n    o.mirrorContainer.appendChild(_mirror);\n    touchy(documentElement, 'add', 'mousemove', drag);\n    classes.add(o.mirrorContainer, 'gu-unselectable');\n    drake.emit('cloned', _mirror, _item, 'mirror');\n  }\n\n  function removeMirrorImage () {\n    if (_mirror) {\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\n      touchy(documentElement, 'remove', 'mousemove', drag);\n      getParent(_mirror).removeChild(_mirror);\n      _mirror = null;\n    }\n  }\n\n  function getImmediateChild (dropTarget, target) {\n    var immediate = target;\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n      immediate = getParent(immediate);\n    }\n    if (immediate === documentElement) {\n      return null;\n    }\n    return immediate;\n  }\n\n  function getReference (dropTarget, target, x, y) {\n    var horizontal = o.direction === 'horizontal';\n    var reference = target !== dropTarget ? inside() : outside();\n    return reference;\n\n    function outside () { // slower, but able to figure out any position\n      var len = dropTarget.children.length;\n      var i;\n      var el;\n      var rect;\n      for (i = 0; i < len; i++) {\n        el = dropTarget.children[i];\n        rect = el.getBoundingClientRect();\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\n      }\n      return null;\n    }\n\n    function inside () { // faster, but only available if dropped inside a child element\n      var rect = target.getBoundingClientRect();\n      if (horizontal) {\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\n      }\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\n    }\n\n    function resolve (after) {\n      return after ? nextEl(target) : target;\n    }\n  }\n\n  function isCopy (item, container) {\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\n  }\n}\n\nfunction touchy (el, op, type, fn) {\n  var touch = {\n    mouseup: 'touchend',\n    mousedown: 'touchstart',\n    mousemove: 'touchmove'\n  };\n  var pointers = {\n    mouseup: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove'\n  };\n  var microsoft = {\n    mouseup: 'MSPointerUp',\n    mousedown: 'MSPointerDown',\n    mousemove: 'MSPointerMove'\n  };\n  if (global.navigator.pointerEnabled) {\n    crossvent[op](el, pointers[type], fn);\n  } else if (global.navigator.msPointerEnabled) {\n    crossvent[op](el, microsoft[type], fn);\n  } else {\n    crossvent[op](el, touch[type], fn);\n    crossvent[op](el, type, fn);\n  }\n}\n\nfunction whichMouseButton (e) {\n  if (e.touches !== void 0) { return e.touches.length; }\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\n  if (e.buttons !== void 0) { return e.buttons; }\n  var button = e.button;\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\n  }\n}\n\nfunction getOffset (el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\n  };\n}\n\nfunction getScroll (scrollProp, offsetProp) {\n  if (typeof global[offsetProp] !== 'undefined') {\n    return global[offsetProp];\n  }\n  if (documentElement.clientHeight) {\n    return documentElement[scrollProp];\n  }\n  return doc.body[scrollProp];\n}\n\nfunction getElementBehindPoint (point, x, y) {\n  var p = point || {};\n  var state = p.className;\n  var el;\n  p.className += ' gu-hide';\n  el = doc.elementFromPoint(x, y);\n  p.className = state;\n  return el;\n}\n\nfunction never () { return false; }\nfunction always () { return true; }\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\nfunction isEditable (el) {\n  if (!el) { return false; } // no parents were editable\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n}\n\nfunction nextEl (el) {\n  return el.nextElementSibling || manually();\n  function manually () {\n    var sibling = el;\n    do {\n      sibling = sibling.nextSibling;\n    } while (sibling && sibling.nodeType !== 1);\n    return sibling;\n  }\n}\n\nfunction getEventHost (e) {\n  // on touchend event, we have to use `e.changedTouches`\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n  // see https://github.com/bevacqua/dragula/issues/34\n  if (e.targetTouches && e.targetTouches.length) {\n    return e.targetTouches[0];\n  }\n  if (e.changedTouches && e.changedTouches.length) {\n    return e.changedTouches[0];\n  }\n  return e;\n}\n\nfunction getCoord (coord, e) {\n  var host = getEventHost(e);\n  var missMap = {\n    pageX: 'clientX', // IE8\n    pageY: 'clientY' // IE8\n  };\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n    coord = missMap[coord];\n  }\n  return host[coord];\n}\n\nmodule.exports = dragula;\n","import * as dragulaExpt from 'dragula';\nimport dragulaExpt__default, {  } from 'dragula';\nimport { Injectable, Optional, Directive, Input, Output, ElementRef, EventEmitter, NgModule } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport * as ɵngcc0 from '@angular/core';\nclass Group {\n    /**\n     * @param {?} name\n     * @param {?} drake\n     * @param {?} options\n     */\n    constructor(name, drake, options) {\n        this.name = name;\n        this.drake = drake;\n        this.options = options;\n        this.initEvents = false;\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @enum {string} */\nconst EventTypes = {\n    Cancel: \"cancel\",\n    Cloned: \"cloned\",\n    Drag: \"drag\",\n    DragEnd: \"dragend\",\n    Drop: \"drop\",\n    Out: \"out\",\n    Over: \"over\",\n    Remove: \"remove\",\n    Shadow: \"shadow\",\n    DropModel: \"dropModel\",\n    RemoveModel: \"removeModel\",\n};\n/** @type {?} */\nconst AllEvents = Object.keys(EventTypes).map(k => /** @type {?} */ (EventTypes[/** @type {?} */ (k)]));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @type {?} */\nconst dragula = dragulaExpt__default || dragulaExpt;\nclass DrakeFactory {\n    /**\n     * @param {?=} build\n     */\n    constructor(build = dragula) {\n        this.build = build;\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @type {?} */\nconst filterEvent = (eventType, filterDragType, projector) => (input) => {\n    return input.pipe(filter(({ event, name }) => {\n        return event === eventType\n            && (filterDragType === undefined || name === filterDragType);\n    }), map(({ name, args }) => projector(name, args)));\n};\n/** @type {?} */\nconst elContainerSourceProjector = (name, [el, container, source]) => ({ name, el, container, source });\nclass DragulaService {\n    /**\n     * @param {?=} drakeFactory\n     */\n    constructor(drakeFactory = null) {\n        this.drakeFactory = drakeFactory;\n        this.dispatch$ = new Subject();\n        this.drag = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Drag, groupName, (name, [el, source]) => ({ name, el, source })));\n        this.dragend = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.DragEnd, groupName, (name, [el]) => ({ name, el })));\n        this.drop = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Drop, groupName, (name, [el, target, source, sibling]) => {\n            return { name, el, target, source, sibling };\n        }));\n        this.elContainerSource = (eventType) => (groupName) => this.dispatch$.pipe(filterEvent(eventType, groupName, elContainerSourceProjector));\n        this.cancel = this.elContainerSource(EventTypes.Cancel);\n        this.remove = this.elContainerSource(EventTypes.Remove);\n        this.shadow = this.elContainerSource(EventTypes.Shadow);\n        this.over = this.elContainerSource(EventTypes.Over);\n        this.out = this.elContainerSource(EventTypes.Out);\n        this.cloned = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Cloned, groupName, (name, [clone, original, cloneType]) => {\n            return { name, clone, original, cloneType };\n        }));\n        this.dropModel = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.DropModel, groupName, (name, [el, target, source, sibling, item, sourceModel, targetModel, sourceIndex, targetIndex]) => {\n            return { name, el, target, source, sibling, item, sourceModel, targetModel, sourceIndex, targetIndex };\n        }));\n        this.removeModel = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.RemoveModel, groupName, (name, [el, container, source, item, sourceModel, sourceIndex]) => {\n            return { name, el, container, source, item, sourceModel, sourceIndex };\n        }));\n        this.groups = {};\n        if (this.drakeFactory === null) {\n            this.drakeFactory = new DrakeFactory();\n        }\n    }\n    /**\n     * Public mainly for testing purposes. Prefer `createGroup()`.\n     * @param {?} group\n     * @return {?}\n     */\n    add(group) {\n        /** @type {?} */\n        let existingGroup = this.find(group.name);\n        if (existingGroup) {\n            throw new Error('Group named: \"' + group.name + '\" already exists.');\n        }\n        this.groups[group.name] = group;\n        this.handleModels(group);\n        this.setupEvents(group);\n        return group;\n    }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    find(name) {\n        return this.groups[name];\n    }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    destroy(name) {\n        /** @type {?} */\n        let group = this.find(name);\n        if (!group) {\n            return;\n        }\n        group.drake && group.drake.destroy();\n        delete this.groups[name];\n    }\n    /**\n     * Creates a group with the specified name and options.\n     *\n     * Note: formerly known as `setOptions`\n     * @template T\n     * @param {?} name\n     * @param {?} options\n     * @return {?}\n     */\n    createGroup(name, options) {\n        return this.add(new Group(name, this.drakeFactory.build([], options), options));\n    }\n    /**\n     * @param {?} __0\n     * @return {?}\n     */\n    handleModels({ name, drake, options }) {\n        /** @type {?} */\n        let dragElm;\n        /** @type {?} */\n        let dragIndex;\n        /** @type {?} */\n        let dropIndex;\n        drake.on('remove', (el, container, source) => {\n            if (!drake.models) {\n                return;\n            }\n            /** @type {?} */\n            let sourceModel = drake.models[drake.containers.indexOf(source)];\n            sourceModel = sourceModel.slice(0);\n            /** @type {?} */\n            const item = sourceModel.splice(dragIndex, 1)[0];\n            // console.log('REMOVE');\n            // console.log(sourceModel);\n            this.dispatch$.next({\n                event: EventTypes.RemoveModel,\n                name,\n                args: [el, container, source, item, sourceModel, dragIndex]\n            });\n        });\n        drake.on('drag', (el, source) => {\n            if (!drake.models) {\n                return;\n            }\n            dragElm = el;\n            dragIndex = this.domIndexOf(el, source);\n        });\n        drake.on('drop', (dropElm, target, source, sibling) => {\n            if (!drake.models || !target) {\n                return;\n            }\n            dropIndex = this.domIndexOf(dropElm, target);\n            /** @type {?} */\n            let sourceModel = drake.models[drake.containers.indexOf(source)];\n            /** @type {?} */\n            let targetModel = drake.models[drake.containers.indexOf(target)];\n            /** @type {?} */\n            let item;\n            if (target === source) {\n                sourceModel = sourceModel.slice(0);\n                item = sourceModel.splice(dragIndex, 1)[0];\n                sourceModel.splice(dropIndex, 0, item);\n                // this was true before we cloned and updated sourceModel,\n                // but targetModel still has the old value\n                targetModel = sourceModel;\n            }\n            else {\n                /** @type {?} */\n                let isCopying = dragElm !== dropElm;\n                item = sourceModel[dragIndex];\n                if (isCopying) {\n                    if (!options.copyItem) {\n                        throw new Error(\"If you have enabled `copy` on a group, you must provide a `copyItem` function.\");\n                    }\n                    item = options.copyItem(item);\n                }\n                if (!isCopying) {\n                    sourceModel = sourceModel.slice(0);\n                    sourceModel.splice(dragIndex, 1);\n                }\n                targetModel = targetModel.slice(0);\n                targetModel.splice(dropIndex, 0, item);\n                if (isCopying) {\n                    try {\n                        target.removeChild(dropElm);\n                    }\n                    catch (e) { }\n                }\n            }\n            this.dispatch$.next({\n                event: EventTypes.DropModel,\n                name,\n                args: [dropElm, target, source, sibling, item, sourceModel, targetModel, dragIndex, dropIndex]\n            });\n        });\n    }\n    /**\n     * @param {?} group\n     * @return {?}\n     */\n    setupEvents(group) {\n        if (group.initEvents) {\n            return;\n        }\n        group.initEvents = true;\n        /** @type {?} */\n        const name = group.name;\n        /** @type {?} */\n        let emitter = (event) => {\n            group.drake.on(event, (...args) => {\n                this.dispatch$.next({ event, name, args });\n            });\n        };\n        AllEvents.forEach(emitter);\n    }\n    /**\n     * @param {?} child\n     * @param {?} parent\n     * @return {?}\n     */\n    domIndexOf(child, parent) {\n        return Array.prototype.indexOf.call(parent.children, child);\n    }\n}\nDragulaService.ɵfac = function DragulaService_Factory(t) { return new (t || DragulaService)(ɵngcc0.ɵɵinject(DrakeFactory, 8)); };\nDragulaService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: DragulaService, factory: DragulaService.ɵfac });\n/** @nocollapse */\nDragulaService.ctorParameters = () => [\n    { type: DrakeFactory, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaService, [{\n        type: Injectable\n    }], function () { return [{ type: DrakeFactory, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nclass DragulaDirective {\n    /**\n     * @param {?} el\n     * @param {?} dragulaService\n     */\n    constructor(el, dragulaService) {\n        this.el = el;\n        this.dragulaService = dragulaService;\n        this.dragulaModelChange = new EventEmitter();\n    }\n    /**\n     * @return {?}\n     */\n    get container() {\n        return this.el && this.el.nativeElement;\n    }\n    /**\n     * @param {?} changes\n     * @return {?}\n     */\n    ngOnChanges(changes) {\n        if (changes && changes.dragula) {\n            const { previousValue: prev, currentValue: current, firstChange } = changes.dragula;\n            /** @type {?} */\n            let hadPreviousValue = !!prev;\n            /** @type {?} */\n            let hasNewValue = !!current;\n            // something -> null       =>  teardown only\n            // something -> something  =>  teardown, then setup\n            //      null -> something  =>  setup only\n            //\n            //      null -> null (precluded by fact of change being present)\n            if (hadPreviousValue) {\n                this.teardown(prev);\n            }\n            if (hasNewValue) {\n                this.setup();\n            }\n        }\n        else if (changes && changes.dragulaModel) {\n            const { previousValue: prev, currentValue: current, firstChange } = changes.dragulaModel;\n            const { drake } = this.group;\n            if (this.dragula && drake) {\n                drake.models = drake.models || [];\n                /** @type {?} */\n                let prevIndex = drake.models.indexOf(prev);\n                if (prevIndex !== -1) {\n                    // delete the previous\n                    drake.models.splice(prevIndex, 1);\n                    // maybe insert a new one at the same spot\n                    if (!!current) {\n                        drake.models.splice(prevIndex, 0, current);\n                    }\n                }\n                else if (!!current) {\n                    // no previous one to remove; just push this one.\n                    drake.models.push(current);\n                }\n            }\n        }\n    }\n    /**\n     * @return {?}\n     */\n    setup() {\n        /** @type {?} */\n        let checkModel = (group) => {\n            if (this.dragulaModel) {\n                if (group.drake.models) {\n                    group.drake.models.push(this.dragulaModel);\n                }\n                else {\n                    group.drake.models = [this.dragulaModel];\n                }\n            }\n        };\n        /** @type {?} */\n        let group = this.dragulaService.find(this.dragula);\n        if (!group) {\n            /** @type {?} */\n            let options = {};\n            group = this.dragulaService.createGroup(this.dragula, options);\n        }\n        // ensure model and container element are pushed\n        checkModel(group);\n        group.drake.containers.push(this.container);\n        this.subscribe(this.dragula);\n        this.group = group;\n    }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    subscribe(name) {\n        this.subs = new Subscription();\n        this.subs.add(this.dragulaService\n            .dropModel(name)\n            .subscribe(({ source, target, sourceModel, targetModel }) => {\n            if (source === this.el.nativeElement) {\n                this.dragulaModelChange.emit(sourceModel);\n            }\n            else if (target === this.el.nativeElement) {\n                this.dragulaModelChange.emit(targetModel);\n            }\n        }));\n        this.subs.add(this.dragulaService\n            .removeModel(name)\n            .subscribe(({ source, sourceModel }) => {\n            if (source === this.el.nativeElement) {\n                this.dragulaModelChange.emit(sourceModel);\n            }\n        }));\n    }\n    /**\n     * @param {?} groupName\n     * @return {?}\n     */\n    teardown(groupName) {\n        if (this.subs) {\n            this.subs.unsubscribe();\n        }\n        /** @type {?} */\n        const group = this.dragulaService.find(groupName);\n        if (group) {\n            /** @type {?} */\n            const itemToRemove = group.drake.containers.indexOf(this.el.nativeElement);\n            if (itemToRemove !== -1) {\n                group.drake.containers.splice(itemToRemove, 1);\n            }\n            if (this.dragulaModel && group.drake && group.drake.models) {\n                /** @type {?} */\n                let modelIndex = group.drake.models.indexOf(this.dragulaModel);\n                if (modelIndex !== -1) {\n                    group.drake.models.splice(modelIndex, 1);\n                }\n            }\n        }\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.teardown(this.dragula);\n    }\n}\nDragulaDirective.ɵfac = function DragulaDirective_Factory(t) { return new (t || DragulaDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DragulaService)); };\nDragulaDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: DragulaDirective, selectors: [[\"\", \"dragula\", \"\"]], inputs: { dragula: \"dragula\", dragulaModel: \"dragulaModel\" }, outputs: { dragulaModelChange: \"dragulaModelChange\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature()] });\n/** @nocollapse */\nDragulaDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: DragulaService }\n];\nDragulaDirective.propDecorators = {\n    dragula: [{ type: Input }],\n    dragulaModel: [{ type: Input }],\n    dragulaModelChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaDirective, [{\n        type: Directive,\n        args: [{ selector: '[dragula]' }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: DragulaService }]; }, { dragulaModelChange: [{\n            type: Output\n        }], dragula: [{\n            type: Input\n        }], dragulaModel: [{\n            type: Input\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nclass DragulaModule {\n    /**\n     * @return {?}\n     */\n    static forRoot() {\n        return {\n            ngModule: DragulaModule,\n            providers: [DragulaService]\n        };\n    }\n}\nDragulaModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: DragulaModule });\nDragulaModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function DragulaModule_Factory(t) { return new (t || DragulaModule)(); } });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DragulaModule, { declarations: [DragulaDirective], exports: [DragulaDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaModule, [{\n        type: NgModule,\n        args: [{\n                exports: [DragulaDirective],\n                declarations: [DragulaDirective]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @type {?} */\nconst MockDrakeFactory = new DrakeFactory((containers, options) => {\n    return new MockDrake(containers, options);\n});\n/**\n * You can use MockDrake to simulate Drake events.\n *\n * The three methods that actually do anything are `on(event, listener)`,\n * `destroy()`, and a new method, `emit()`. Use `emit()` to manually emit Drake\n * events, and if you injected MockDrake properly with MockDrakeFactory or\n * mocked the DragulaService.find() method, then you can make ng2-dragula think\n * drags and drops are happening.\n *\n * Caveats:\n *\n * 1. YOU MUST MAKE THE DOM CHANGES YOURSELF.\n * 2. REPEAT: YOU MUST MAKE THE DOM CHANGES YOURSELF.\n *    That means `source.removeChild(el)`, and `target.insertBefore(el)`.\n * 3. None of the other methods do anything.\n *    That's ok, because ng2-dragula doesn't use them.\n */\nclass MockDrake {\n    /**\n     * @param {?=} containers A list of container elements.\n     * @param {?=} options These will NOT be used. At all.\n     * @param {?=} models Nonstandard, but useful for testing using `new MockDrake()` directly.\n     *               Note, default value is undefined, like a real Drake. Don't change that.\n     */\n    constructor(containers = [], options = {}, models) {\n        this.containers = containers;\n        this.options = options;\n        this.models = models;\n        /* Doesn't represent anything meaningful. */\n        this.dragging = false;\n        this.emitter$ = new Subject();\n        this.subs = new Subscription();\n    }\n    /**\n     * @param {?} item\n     * @return {?}\n     */\n    start(item) {\n        this.dragging = true;\n    }\n    /**\n     * @return {?}\n     */\n    end() {\n        this.dragging = false;\n    }\n    /**\n     * @param {?=} revert\n     * @return {?}\n     */\n    cancel(revert) {\n        this.dragging = false;\n    }\n    /**\n     * @return {?}\n     */\n    remove() {\n        this.dragging = false;\n    }\n    /**\n     * @param {?} event\n     * @param {?} callback\n     * @return {?}\n     */\n    on(event, callback) {\n        this.subs.add(this.emitter$\n            .pipe(filter(({ eventType }) => eventType === event))\n            .subscribe(({ args }) => {\n            callback(...args);\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    destroy() {\n        this.subs.unsubscribe();\n    }\n    /**\n     * This is the most useful method. You can use it to manually fire events that would normally\n     * be fired by a real drake.\n     *\n     * You're likely most interested in firing `drag`, `remove` and `drop`, the three events\n     * DragulaService uses to implement [dragulaModel].\n     *\n     * See https://github.com/bevacqua/dragula#drakeon-events for what you should emit (and in what order).\n     *\n     * (Note also, firing dropModel and removeModel won't work. You would have to mock DragulaService for that.)\n     * @param {?} eventType\n     * @param {...?} args\n     * @return {?}\n     */\n    emit(eventType, ...args) {\n        this.emitter$.next({ eventType, args });\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\nexport { DragulaDirective, DragulaService, DragulaModule, dragula, DrakeFactory, Group, EventTypes, MockDrake, MockDrakeFactory };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1VzZXJzL1NoYWh6YWQgQWxpIE1hbGlrL0Rvd25sb2Fkcy9wYXJybGVsIHBvcnRmb2xpby90aGVtZWZvcmVzdC0xWnZya0FOSy1hbm51bGFyLWFuZ3VsYXItbWF0ZXJpYWwtZGVzaWduLWFkbWluLXRlbXBsYXRlL2FubnVsYXIvYW5udWxhci9ub2RlX21vZHVsZXMvbmcyLWRyYWd1bGEvZGlzdC9mZXNtMjAxNS9uZzItZHJhZ3VsYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7QUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQThQQyx5R0FHQzs7Ozs7Ozs7O2tDQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXNKRCw4UUFHQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBVUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWdCRDs7Ozs7Ozs7MEJBTUMiLCJmaWxlIjoibmcyLWRyYWd1bGEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkcmFndWxhRXhwdCBmcm9tICdkcmFndWxhJztcbmltcG9ydCBkcmFndWxhRXhwdF9fZGVmYXVsdCwgeyAgfSBmcm9tICdkcmFndWxhJztcbmltcG9ydCB7IEluamVjdGFibGUsIE9wdGlvbmFsLCBEaXJlY3RpdmUsIElucHV0LCBPdXRwdXQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbmNsYXNzIEdyb3VwIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IG5hbWVcbiAgICAgKiBAcGFyYW0gez99IGRyYWtlXG4gICAgICogQHBhcmFtIHs/fSBvcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgZHJha2UsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kcmFrZSA9IGRyYWtlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmluaXRFdmVudHMgPSBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuY29uc3QgRXZlbnRUeXBlcyA9IHtcbiAgICBDYW5jZWw6IFwiY2FuY2VsXCIsXG4gICAgQ2xvbmVkOiBcImNsb25lZFwiLFxuICAgIERyYWc6IFwiZHJhZ1wiLFxuICAgIERyYWdFbmQ6IFwiZHJhZ2VuZFwiLFxuICAgIERyb3A6IFwiZHJvcFwiLFxuICAgIE91dDogXCJvdXRcIixcbiAgICBPdmVyOiBcIm92ZXJcIixcbiAgICBSZW1vdmU6IFwicmVtb3ZlXCIsXG4gICAgU2hhZG93OiBcInNoYWRvd1wiLFxuICAgIERyb3BNb2RlbDogXCJkcm9wTW9kZWxcIixcbiAgICBSZW1vdmVNb2RlbDogXCJyZW1vdmVNb2RlbFwiLFxufTtcbi8qKiBAdHlwZSB7P30gKi9cbmNvbnN0IEFsbEV2ZW50cyA9IE9iamVjdC5rZXlzKEV2ZW50VHlwZXMpLm1hcChrID0+IC8qKiBAdHlwZSB7P30gKi8gKEV2ZW50VHlwZXNbLyoqIEB0eXBlIHs/fSAqLyAoayldKSk7XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbi8qKiBAdHlwZSB7P30gKi9cbmNvbnN0IGRyYWd1bGEgPSBkcmFndWxhRXhwdF9fZGVmYXVsdCB8fCBkcmFndWxhRXhwdDtcbmNsYXNzIERyYWtlRmFjdG9yeSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/PX0gYnVpbGRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihidWlsZCA9IGRyYWd1bGEpIHtcbiAgICAgICAgdGhpcy5idWlsZCA9IGJ1aWxkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuLyoqIEB0eXBlIHs/fSAqL1xuY29uc3QgZmlsdGVyRXZlbnQgPSAoZXZlbnRUeXBlLCBmaWx0ZXJEcmFnVHlwZSwgcHJvamVjdG9yKSA9PiAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gaW5wdXQucGlwZShmaWx0ZXIoKHsgZXZlbnQsIG5hbWUgfSkgPT4ge1xuICAgICAgICByZXR1cm4gZXZlbnQgPT09IGV2ZW50VHlwZVxuICAgICAgICAgICAgJiYgKGZpbHRlckRyYWdUeXBlID09PSB1bmRlZmluZWQgfHwgbmFtZSA9PT0gZmlsdGVyRHJhZ1R5cGUpO1xuICAgIH0pLCBtYXAoKHsgbmFtZSwgYXJncyB9KSA9PiBwcm9qZWN0b3IobmFtZSwgYXJncykpKTtcbn07XG4vKiogQHR5cGUgez99ICovXG5jb25zdCBlbENvbnRhaW5lclNvdXJjZVByb2plY3RvciA9IChuYW1lLCBbZWwsIGNvbnRhaW5lciwgc291cmNlXSkgPT4gKHsgbmFtZSwgZWwsIGNvbnRhaW5lciwgc291cmNlIH0pO1xuY2xhc3MgRHJhZ3VsYVNlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Pz19IGRyYWtlRmFjdG9yeVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRyYWtlRmFjdG9yeSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5kcmFrZUZhY3RvcnkgPSBkcmFrZUZhY3Rvcnk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2gkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5kcmFnID0gKGdyb3VwTmFtZSkgPT4gdGhpcy5kaXNwYXRjaCQucGlwZShmaWx0ZXJFdmVudChFdmVudFR5cGVzLkRyYWcsIGdyb3VwTmFtZSwgKG5hbWUsIFtlbCwgc291cmNlXSkgPT4gKHsgbmFtZSwgZWwsIHNvdXJjZSB9KSkpO1xuICAgICAgICB0aGlzLmRyYWdlbmQgPSAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KEV2ZW50VHlwZXMuRHJhZ0VuZCwgZ3JvdXBOYW1lLCAobmFtZSwgW2VsXSkgPT4gKHsgbmFtZSwgZWwgfSkpKTtcbiAgICAgICAgdGhpcy5kcm9wID0gKGdyb3VwTmFtZSkgPT4gdGhpcy5kaXNwYXRjaCQucGlwZShmaWx0ZXJFdmVudChFdmVudFR5cGVzLkRyb3AsIGdyb3VwTmFtZSwgKG5hbWUsIFtlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmddKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lLCBlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcgfTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmVsQ29udGFpbmVyU291cmNlID0gKGV2ZW50VHlwZSkgPT4gKGdyb3VwTmFtZSkgPT4gdGhpcy5kaXNwYXRjaCQucGlwZShmaWx0ZXJFdmVudChldmVudFR5cGUsIGdyb3VwTmFtZSwgZWxDb250YWluZXJTb3VyY2VQcm9qZWN0b3IpKTtcbiAgICAgICAgdGhpcy5jYW5jZWwgPSB0aGlzLmVsQ29udGFpbmVyU291cmNlKEV2ZW50VHlwZXMuQ2FuY2VsKTtcbiAgICAgICAgdGhpcy5yZW1vdmUgPSB0aGlzLmVsQ29udGFpbmVyU291cmNlKEV2ZW50VHlwZXMuUmVtb3ZlKTtcbiAgICAgICAgdGhpcy5zaGFkb3cgPSB0aGlzLmVsQ29udGFpbmVyU291cmNlKEV2ZW50VHlwZXMuU2hhZG93KTtcbiAgICAgICAgdGhpcy5vdmVyID0gdGhpcy5lbENvbnRhaW5lclNvdXJjZShFdmVudFR5cGVzLk92ZXIpO1xuICAgICAgICB0aGlzLm91dCA9IHRoaXMuZWxDb250YWluZXJTb3VyY2UoRXZlbnRUeXBlcy5PdXQpO1xuICAgICAgICB0aGlzLmNsb25lZCA9IChncm91cE5hbWUpID0+IHRoaXMuZGlzcGF0Y2gkLnBpcGUoZmlsdGVyRXZlbnQoRXZlbnRUeXBlcy5DbG9uZWQsIGdyb3VwTmFtZSwgKG5hbWUsIFtjbG9uZSwgb3JpZ2luYWwsIGNsb25lVHlwZV0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGNsb25lLCBvcmlnaW5hbCwgY2xvbmVUeXBlIH07XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5kcm9wTW9kZWwgPSAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KEV2ZW50VHlwZXMuRHJvcE1vZGVsLCBncm91cE5hbWUsIChuYW1lLCBbZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nLCBpdGVtLCBzb3VyY2VNb2RlbCwgdGFyZ2V0TW9kZWwsIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleF0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGVsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZywgaXRlbSwgc291cmNlTW9kZWwsIHRhcmdldE1vZGVsLCBzb3VyY2VJbmRleCwgdGFyZ2V0SW5kZXggfTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnJlbW92ZU1vZGVsID0gKGdyb3VwTmFtZSkgPT4gdGhpcy5kaXNwYXRjaCQucGlwZShmaWx0ZXJFdmVudChFdmVudFR5cGVzLlJlbW92ZU1vZGVsLCBncm91cE5hbWUsIChuYW1lLCBbZWwsIGNvbnRhaW5lciwgc291cmNlLCBpdGVtLCBzb3VyY2VNb2RlbCwgc291cmNlSW5kZXhdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lLCBlbCwgY29udGFpbmVyLCBzb3VyY2UsIGl0ZW0sIHNvdXJjZU1vZGVsLCBzb3VyY2VJbmRleCB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgICAgIGlmICh0aGlzLmRyYWtlRmFjdG9yeSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kcmFrZUZhY3RvcnkgPSBuZXcgRHJha2VGYWN0b3J5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVibGljIG1haW5seSBmb3IgdGVzdGluZyBwdXJwb3Nlcy4gUHJlZmVyIGBjcmVhdGVHcm91cCgpYC5cbiAgICAgKiBAcGFyYW0gez99IGdyb3VwXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBhZGQoZ3JvdXApIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZXhpc3RpbmdHcm91cCA9IHRoaXMuZmluZChncm91cC5uYW1lKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nR3JvdXApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR3JvdXAgbmFtZWQ6IFwiJyArIGdyb3VwLm5hbWUgKyAnXCIgYWxyZWFkeSBleGlzdHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ncm91cHNbZ3JvdXAubmFtZV0gPSBncm91cDtcbiAgICAgICAgdGhpcy5oYW5kbGVNb2RlbHMoZ3JvdXApO1xuICAgICAgICB0aGlzLnNldHVwRXZlbnRzKGdyb3VwKTtcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IG5hbWVcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGZpbmQobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cHNbbmFtZV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gbmFtZVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZGVzdHJveShuYW1lKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGdyb3VwID0gdGhpcy5maW5kKG5hbWUpO1xuICAgICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXAuZHJha2UgJiYgZ3JvdXAuZHJha2UuZGVzdHJveSgpO1xuICAgICAgICBkZWxldGUgdGhpcy5ncm91cHNbbmFtZV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBncm91cCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSBhbmQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIE5vdGU6IGZvcm1lcmx5IGtub3duIGFzIGBzZXRPcHRpb25zYFxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICogQHBhcmFtIHs/fSBuYW1lXG4gICAgICogQHBhcmFtIHs/fSBvcHRpb25zXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBjcmVhdGVHcm91cChuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChuZXcgR3JvdXAobmFtZSwgdGhpcy5kcmFrZUZhY3RvcnkuYnVpbGQoW10sIG9wdGlvbnMpLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gX18wXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBoYW5kbGVNb2RlbHMoeyBuYW1lLCBkcmFrZSwgb3B0aW9ucyB9KSB7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGRyYWdFbG07XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGRyYWdJbmRleDtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZHJvcEluZGV4O1xuICAgICAgICBkcmFrZS5vbigncmVtb3ZlJywgKGVsLCBjb250YWluZXIsIHNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkcmFrZS5tb2RlbHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgICAgICBsZXQgc291cmNlTW9kZWwgPSBkcmFrZS5tb2RlbHNbZHJha2UuY29udGFpbmVycy5pbmRleE9mKHNvdXJjZSldO1xuICAgICAgICAgICAgc291cmNlTW9kZWwgPSBzb3VyY2VNb2RlbC5zbGljZSgwKTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzb3VyY2VNb2RlbC5zcGxpY2UoZHJhZ0luZGV4LCAxKVswXTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSRU1PVkUnKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNvdXJjZU1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2gkLm5leHQoe1xuICAgICAgICAgICAgICAgIGV2ZW50OiBFdmVudFR5cGVzLlJlbW92ZU1vZGVsLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgYXJnczogW2VsLCBjb250YWluZXIsIHNvdXJjZSwgaXRlbSwgc291cmNlTW9kZWwsIGRyYWdJbmRleF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZHJha2Uub24oJ2RyYWcnLCAoZWwsIHNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkcmFrZS5tb2RlbHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmFnRWxtID0gZWw7XG4gICAgICAgICAgICBkcmFnSW5kZXggPSB0aGlzLmRvbUluZGV4T2YoZWwsIHNvdXJjZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkcmFrZS5vbignZHJvcCcsIChkcm9wRWxtLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZykgPT4ge1xuICAgICAgICAgICAgaWYgKCFkcmFrZS5tb2RlbHMgfHwgIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyb3BJbmRleCA9IHRoaXMuZG9tSW5kZXhPZihkcm9wRWxtLCB0YXJnZXQpO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgbGV0IHNvdXJjZU1vZGVsID0gZHJha2UubW9kZWxzW2RyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZihzb3VyY2UpXTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGxldCB0YXJnZXRNb2RlbCA9IGRyYWtlLm1vZGVsc1tkcmFrZS5jb250YWluZXJzLmluZGV4T2YodGFyZ2V0KV07XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgICAgICBsZXQgaXRlbTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZU1vZGVsID0gc291cmNlTW9kZWwuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgaXRlbSA9IHNvdXJjZU1vZGVsLnNwbGljZShkcmFnSW5kZXgsIDEpWzBdO1xuICAgICAgICAgICAgICAgIHNvdXJjZU1vZGVsLnNwbGljZShkcm9wSW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2FzIHRydWUgYmVmb3JlIHdlIGNsb25lZCBhbmQgdXBkYXRlZCBzb3VyY2VNb2RlbCxcbiAgICAgICAgICAgICAgICAvLyBidXQgdGFyZ2V0TW9kZWwgc3RpbGwgaGFzIHRoZSBvbGQgdmFsdWVcbiAgICAgICAgICAgICAgICB0YXJnZXRNb2RlbCA9IHNvdXJjZU1vZGVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgICAgIGxldCBpc0NvcHlpbmcgPSBkcmFnRWxtICE9PSBkcm9wRWxtO1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBzb3VyY2VNb2RlbFtkcmFnSW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChpc0NvcHlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmNvcHlJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJZiB5b3UgaGF2ZSBlbmFibGVkIGBjb3B5YCBvbiBhIGdyb3VwLCB5b3UgbXVzdCBwcm92aWRlIGEgYGNvcHlJdGVtYCBmdW5jdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG9wdGlvbnMuY29weUl0ZW0oaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNDb3B5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZU1vZGVsID0gc291cmNlTW9kZWwuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZU1vZGVsLnNwbGljZShkcmFnSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXJnZXRNb2RlbCA9IHRhcmdldE1vZGVsLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIHRhcmdldE1vZGVsLnNwbGljZShkcm9wSW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChpc0NvcHlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVDaGlsZChkcm9wRWxtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCQubmV4dCh7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IEV2ZW50VHlwZXMuRHJvcE1vZGVsLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgYXJnczogW2Ryb3BFbG0sIHRhcmdldCwgc291cmNlLCBzaWJsaW5nLCBpdGVtLCBzb3VyY2VNb2RlbCwgdGFyZ2V0TW9kZWwsIGRyYWdJbmRleCwgZHJvcEluZGV4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGdyb3VwXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBzZXR1cEV2ZW50cyhncm91cCkge1xuICAgICAgICBpZiAoZ3JvdXAuaW5pdEV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwLmluaXRFdmVudHMgPSB0cnVlO1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGNvbnN0IG5hbWUgPSBncm91cC5uYW1lO1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGxldCBlbWl0dGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBncm91cC5kcmFrZS5vbihldmVudCwgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoJC5uZXh0KHsgZXZlbnQsIG5hbWUsIGFyZ3MgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWxsRXZlbnRzLmZvckVhY2goZW1pdHRlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gY2hpbGRcbiAgICAgKiBAcGFyYW0gez99IHBhcmVudFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZG9tSW5kZXhPZihjaGlsZCwgcGFyZW50KSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHBhcmVudC5jaGlsZHJlbiwgY2hpbGQpO1xuICAgIH1cbn1cbkRyYWd1bGFTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkRyYWd1bGFTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRHJha2VGYWN0b3J5LCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9XSB9XG5dO1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG5jbGFzcyBEcmFndWxhRGlyZWN0aXZlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGVsXG4gICAgICogQHBhcmFtIHs/fSBkcmFndWxhU2VydmljZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsLCBkcmFndWxhU2VydmljZSkge1xuICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgIHRoaXMuZHJhZ3VsYVNlcnZpY2UgPSBkcmFndWxhU2VydmljZTtcbiAgICAgICAgdGhpcy5kcmFndWxhTW9kZWxDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwgJiYgdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGNoYW5nZXNcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMgJiYgY2hhbmdlcy5kcmFndWxhKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByZXZpb3VzVmFsdWU6IHByZXYsIGN1cnJlbnRWYWx1ZTogY3VycmVudCwgZmlyc3RDaGFuZ2UgfSA9IGNoYW5nZXMuZHJhZ3VsYTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGxldCBoYWRQcmV2aW91c1ZhbHVlID0gISFwcmV2O1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgbGV0IGhhc05ld1ZhbHVlID0gISFjdXJyZW50O1xuICAgICAgICAgICAgLy8gc29tZXRoaW5nIC0+IG51bGwgICAgICAgPT4gIHRlYXJkb3duIG9ubHlcbiAgICAgICAgICAgIC8vIHNvbWV0aGluZyAtPiBzb21ldGhpbmcgID0+ICB0ZWFyZG93biwgdGhlbiBzZXR1cFxuICAgICAgICAgICAgLy8gICAgICBudWxsIC0+IHNvbWV0aGluZyAgPT4gIHNldHVwIG9ubHlcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgIG51bGwgLT4gbnVsbCAocHJlY2x1ZGVkIGJ5IGZhY3Qgb2YgY2hhbmdlIGJlaW5nIHByZXNlbnQpXG4gICAgICAgICAgICBpZiAoaGFkUHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVhcmRvd24ocHJldik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzTmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlcyAmJiBjaGFuZ2VzLmRyYWd1bGFNb2RlbCkge1xuICAgICAgICAgICAgY29uc3QgeyBwcmV2aW91c1ZhbHVlOiBwcmV2LCBjdXJyZW50VmFsdWU6IGN1cnJlbnQsIGZpcnN0Q2hhbmdlIH0gPSBjaGFuZ2VzLmRyYWd1bGFNb2RlbDtcbiAgICAgICAgICAgIGNvbnN0IHsgZHJha2UgfSA9IHRoaXMuZ3JvdXA7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFndWxhICYmIGRyYWtlKSB7XG4gICAgICAgICAgICAgICAgZHJha2UubW9kZWxzID0gZHJha2UubW9kZWxzIHx8IFtdO1xuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgICAgICBsZXQgcHJldkluZGV4ID0gZHJha2UubW9kZWxzLmluZGV4T2YocHJldik7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgICAgICBkcmFrZS5tb2RlbHMuc3BsaWNlKHByZXZJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1heWJlIGluc2VydCBhIG5ldyBvbmUgYXQgdGhlIHNhbWUgc3BvdFxuICAgICAgICAgICAgICAgICAgICBpZiAoISFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFrZS5tb2RlbHMuc3BsaWNlKHByZXZJbmRleCwgMCwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoISFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIHByZXZpb3VzIG9uZSB0byByZW1vdmU7IGp1c3QgcHVzaCB0aGlzIG9uZS5cbiAgICAgICAgICAgICAgICAgICAgZHJha2UubW9kZWxzLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgc2V0dXAoKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGNoZWNrTW9kZWwgPSAoZ3JvdXApID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWd1bGFNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmIChncm91cC5kcmFrZS5tb2RlbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZHJha2UubW9kZWxzLnB1c2godGhpcy5kcmFndWxhTW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZHJha2UubW9kZWxzID0gW3RoaXMuZHJhZ3VsYU1vZGVsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGdyb3VwID0gdGhpcy5kcmFndWxhU2VydmljZS5maW5kKHRoaXMuZHJhZ3VsYSk7XG4gICAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGxldCBvcHRpb25zID0ge307XG4gICAgICAgICAgICBncm91cCA9IHRoaXMuZHJhZ3VsYVNlcnZpY2UuY3JlYXRlR3JvdXAodGhpcy5kcmFndWxhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlbnN1cmUgbW9kZWwgYW5kIGNvbnRhaW5lciBlbGVtZW50IGFyZSBwdXNoZWRcbiAgICAgICAgY2hlY2tNb2RlbChncm91cCk7XG4gICAgICAgIGdyb3VwLmRyYWtlLmNvbnRhaW5lcnMucHVzaCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKHRoaXMuZHJhZ3VsYSk7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBuYW1lXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBzdWJzY3JpYmUobmFtZSkge1xuICAgICAgICB0aGlzLnN1YnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5kcmFndWxhU2VydmljZVxuICAgICAgICAgICAgLmRyb3BNb2RlbChuYW1lKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBzb3VyY2UsIHRhcmdldCwgc291cmNlTW9kZWwsIHRhcmdldE1vZGVsIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgPT09IHRoaXMuZWwubmF0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ3VsYU1vZGVsQ2hhbmdlLmVtaXQoc291cmNlTW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0ID09PSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWd1bGFNb2RlbENoYW5nZS5lbWl0KHRhcmdldE1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMuZHJhZ3VsYVNlcnZpY2VcbiAgICAgICAgICAgIC5yZW1vdmVNb2RlbChuYW1lKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBzb3VyY2UsIHNvdXJjZU1vZGVsIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgPT09IHRoaXMuZWwubmF0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ3VsYU1vZGVsQ2hhbmdlLmVtaXQoc291cmNlTW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZ3JvdXBOYW1lXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICB0ZWFyZG93bihncm91cE5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicykge1xuICAgICAgICAgICAgdGhpcy5zdWJzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuZHJhZ3VsYVNlcnZpY2UuZmluZChncm91cE5hbWUpO1xuICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1JlbW92ZSA9IGdyb3VwLmRyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZih0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGl0ZW1Ub1JlbW92ZSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBncm91cC5kcmFrZS5jb250YWluZXJzLnNwbGljZShpdGVtVG9SZW1vdmUsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ3VsYU1vZGVsICYmIGdyb3VwLmRyYWtlICYmIGdyb3VwLmRyYWtlLm1vZGVscykge1xuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgICAgICBsZXQgbW9kZWxJbmRleCA9IGdyb3VwLmRyYWtlLm1vZGVscy5pbmRleE9mKHRoaXMuZHJhZ3VsYU1vZGVsKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWxJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZHJha2UubW9kZWxzLnNwbGljZShtb2RlbEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy50ZWFyZG93bih0aGlzLmRyYWd1bGEpO1xuICAgIH1cbn1cbkRyYWd1bGFEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbZHJhZ3VsYV0nIH0sXSB9XG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5EcmFndWxhRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogRHJhZ3VsYVNlcnZpY2UgfVxuXTtcbkRyYWd1bGFEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZHJhZ3VsYTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZHJhZ3VsYU1vZGVsOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkcmFndWxhTW9kZWxDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuY2xhc3MgRHJhZ3VsYU1vZHVsZSB7XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBzdGF0aWMgZm9yUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBEcmFndWxhTW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbRHJhZ3VsYVNlcnZpY2VdXG4gICAgICAgIH07XG4gICAgfVxufVxuRHJhZ3VsYU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZXhwb3J0czogW0RyYWd1bGFEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW0RyYWd1bGFEaXJlY3RpdmVdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbi8qKiBAdHlwZSB7P30gKi9cbmNvbnN0IE1vY2tEcmFrZUZhY3RvcnkgPSBuZXcgRHJha2VGYWN0b3J5KChjb250YWluZXJzLCBvcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBNb2NrRHJha2UoY29udGFpbmVycywgb3B0aW9ucyk7XG59KTtcbi8qKlxuICogWW91IGNhbiB1c2UgTW9ja0RyYWtlIHRvIHNpbXVsYXRlIERyYWtlIGV2ZW50cy5cbiAqXG4gKiBUaGUgdGhyZWUgbWV0aG9kcyB0aGF0IGFjdHVhbGx5IGRvIGFueXRoaW5nIGFyZSBgb24oZXZlbnQsIGxpc3RlbmVyKWAsXG4gKiBgZGVzdHJveSgpYCwgYW5kIGEgbmV3IG1ldGhvZCwgYGVtaXQoKWAuIFVzZSBgZW1pdCgpYCB0byBtYW51YWxseSBlbWl0IERyYWtlXG4gKiBldmVudHMsIGFuZCBpZiB5b3UgaW5qZWN0ZWQgTW9ja0RyYWtlIHByb3Blcmx5IHdpdGggTW9ja0RyYWtlRmFjdG9yeSBvclxuICogbW9ja2VkIHRoZSBEcmFndWxhU2VydmljZS5maW5kKCkgbWV0aG9kLCB0aGVuIHlvdSBjYW4gbWFrZSBuZzItZHJhZ3VsYSB0aGlua1xuICogZHJhZ3MgYW5kIGRyb3BzIGFyZSBoYXBwZW5pbmcuXG4gKlxuICogQ2F2ZWF0czpcbiAqXG4gKiAxLiBZT1UgTVVTVCBNQUtFIFRIRSBET00gQ0hBTkdFUyBZT1VSU0VMRi5cbiAqIDIuIFJFUEVBVDogWU9VIE1VU1QgTUFLRSBUSEUgRE9NIENIQU5HRVMgWU9VUlNFTEYuXG4gKiAgICBUaGF0IG1lYW5zIGBzb3VyY2UucmVtb3ZlQ2hpbGQoZWwpYCwgYW5kIGB0YXJnZXQuaW5zZXJ0QmVmb3JlKGVsKWAuXG4gKiAzLiBOb25lIG9mIHRoZSBvdGhlciBtZXRob2RzIGRvIGFueXRoaW5nLlxuICogICAgVGhhdCdzIG9rLCBiZWNhdXNlIG5nMi1kcmFndWxhIGRvZXNuJ3QgdXNlIHRoZW0uXG4gKi9cbmNsYXNzIE1vY2tEcmFrZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/PX0gY29udGFpbmVycyBBIGxpc3Qgb2YgY29udGFpbmVyIGVsZW1lbnRzLlxuICAgICAqIEBwYXJhbSB7Pz19IG9wdGlvbnMgVGhlc2Ugd2lsbCBOT1QgYmUgdXNlZC4gQXQgYWxsLlxuICAgICAqIEBwYXJhbSB7Pz19IG1vZGVscyBOb25zdGFuZGFyZCwgYnV0IHVzZWZ1bCBmb3IgdGVzdGluZyB1c2luZyBgbmV3IE1vY2tEcmFrZSgpYCBkaXJlY3RseS5cbiAgICAgKiAgICAgICAgICAgICAgIE5vdGUsIGRlZmF1bHQgdmFsdWUgaXMgdW5kZWZpbmVkLCBsaWtlIGEgcmVhbCBEcmFrZS4gRG9uJ3QgY2hhbmdlIHRoYXQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVycyA9IFtdLCBvcHRpb25zID0ge30sIG1vZGVscykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lcnMgPSBjb250YWluZXJzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm1vZGVscyA9IG1vZGVscztcbiAgICAgICAgLyogRG9lc24ndCByZXByZXNlbnQgYW55dGhpbmcgbWVhbmluZ2Z1bC4gKi9cbiAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVtaXR0ZXIkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zdWJzID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGl0ZW1cbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHN0YXJ0KGl0ZW0pIHtcbiAgICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZW5kKCkge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Pz19IHJldmVydFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgY2FuY2VsKHJldmVydCkge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgcmVtb3ZlKCkge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZXZlbnRcbiAgICAgKiBAcGFyYW0gez99IGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLmVtaXR0ZXIkXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHsgZXZlbnRUeXBlIH0pID0+IGV2ZW50VHlwZSA9PT0gZXZlbnQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBhcmdzIH0pID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdWJzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIG1vc3QgdXNlZnVsIG1ldGhvZC4gWW91IGNhbiB1c2UgaXQgdG8gbWFudWFsbHkgZmlyZSBldmVudHMgdGhhdCB3b3VsZCBub3JtYWxseVxuICAgICAqIGJlIGZpcmVkIGJ5IGEgcmVhbCBkcmFrZS5cbiAgICAgKlxuICAgICAqIFlvdSdyZSBsaWtlbHkgbW9zdCBpbnRlcmVzdGVkIGluIGZpcmluZyBgZHJhZ2AsIGByZW1vdmVgIGFuZCBgZHJvcGAsIHRoZSB0aHJlZSBldmVudHNcbiAgICAgKiBEcmFndWxhU2VydmljZSB1c2VzIHRvIGltcGxlbWVudCBbZHJhZ3VsYU1vZGVsXS5cbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYSNkcmFrZW9uLWV2ZW50cyBmb3Igd2hhdCB5b3Ugc2hvdWxkIGVtaXQgKGFuZCBpbiB3aGF0IG9yZGVyKS5cbiAgICAgKlxuICAgICAqIChOb3RlIGFsc28sIGZpcmluZyBkcm9wTW9kZWwgYW5kIHJlbW92ZU1vZGVsIHdvbid0IHdvcmsuIFlvdSB3b3VsZCBoYXZlIHRvIG1vY2sgRHJhZ3VsYVNlcnZpY2UgZm9yIHRoYXQuKVxuICAgICAqIEBwYXJhbSB7P30gZXZlbnRUeXBlXG4gICAgICogQHBhcmFtIHsuLi4/fSBhcmdzXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBlbWl0KGV2ZW50VHlwZSwgLi4uYXJncykge1xuICAgICAgICB0aGlzLmVtaXR0ZXIkLm5leHQoeyBldmVudFR5cGUsIGFyZ3MgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cblxuZXhwb3J0IHsgRHJhZ3VsYURpcmVjdGl2ZSwgRHJhZ3VsYVNlcnZpY2UsIERyYWd1bGFNb2R1bGUsIGRyYWd1bGEsIERyYWtlRmFjdG9yeSwgR3JvdXAsIEV2ZW50VHlwZXMsIE1vY2tEcmFrZSwgTW9ja0RyYWtlRmFjdG9yeSB9O1xuIl19","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;","import { Component } from '@angular/core';\r\nimport { AppSettings } from '../../app.settings';\r\nimport { Settings } from '../../app.settings.model';\r\n\r\n@Component({\r\n  selector: 'app-drag-drop',\r\n  templateUrl: './drag-drop.component.html',\r\n  styleUrls: ['./drag-drop.component.scss']\r\n})\r\nexport class DragDropComponent {\r\n  public icons = [ \"home\", \"person\", \"alarm\", \"work\", \"mail\", \"favorite\"];\r\n  public colors = [ \"accent\", \"primary\", \"warn\" ];\r\n  public settings: Settings;\r\n  constructor(public appSettings:AppSettings) {\r\n    this.settings = this.appSettings.settings; \r\n  }\r\n}","<app-content-header \r\n    [icon]=\"'mouse'\" \r\n    [title]=\"'Drag & Drop'\" \r\n    [hideBreadcrumb]=\"false\"\r\n    [hasBgImage]=\"true\" \r\n    [class]=\"'pb-4'\"></app-content-header>\r\n\r\n<div fxLayout=\"row wrap\" fxLayout.xs=\"column\" [dragula]=\"'bag-container'\" class=\"p-2\">\r\n    <div *ngFor=\"let icon of icons\" fxFlex=\"33.3\" class=\"p-2\"> \r\n        <mat-card class=\"draggable\">            \r\n            <mat-card-header fxLayoutAlign=\"center\">\r\n                <mat-card-subtitle fxLayoutAlign=\"center\">\r\n                    <mat-icon class=\"mat-icon-xlg\">{{icon}}</mat-icon>\r\n                </mat-card-subtitle>\r\n            </mat-card-header>\r\n            <mat-card-content class=\"text-center\">\r\n                There's also the possibility of moving elements around in the same container, changing their position.\r\n            </mat-card-content>           \r\n        </mat-card>\r\n    </div>\r\n</div>\r\n<div fxLayout=\"row\" class=\"p-2\">\r\n    <div fxFlex=\"50\" class=\"p-2\">\r\n        <mat-card>            \r\n            <mat-card-header fxLayoutAlign=\"center\">\r\n                <mat-card-subtitle fxLayoutAlign=\"center\">\r\n                    <h2>First Container</h2> \r\n                </mat-card-subtitle>\r\n            </mat-card-header>\r\n            <mat-card-content [dragula]=\"'bag-1'\" class=\"bag\">\r\n                <mat-card *ngFor=\"let color of colors\" [class.bg-primary]=\"color=='primary'\" [class.bg-accent]=\"color=='accent'\" [class.bg-warn]=\"color=='warn'\" class=\"draggable\">\r\n                    You can move these elements between these two containers\r\n                </mat-card>                 \r\n            </mat-card-content>           \r\n        </mat-card> \r\n    </div>\r\n    <div fxFlex=\"50\" class=\"p-2\"> \r\n        <mat-card>            \r\n            <mat-card-header fxLayoutAlign=\"center\">\r\n                <mat-card-subtitle fxLayoutAlign=\"center\">\r\n                    <h2>Second Container</h2> \r\n                </mat-card-subtitle>\r\n            </mat-card-header>\r\n            <mat-card-content [dragula]=\"'bag-1'\" class=\"bag\">\r\n                <mat-card *ngFor=\"let color of colors\" [class.bg-primary]=\"color=='primary'\" [class.bg-accent]=\"color=='accent'\" [class.bg-warn]=\"color=='warn'\"  class=\"draggable\">\r\n                    You can move these elements between these two containers\r\n                </mat-card>                 \r\n            </mat-card-content>          \r\n        </mat-card> \r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { DragulaModule } from 'ng2-dragula';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { DragDropComponent } from './drag-drop.component';\r\n\r\nexport const routes = [\r\n  { path: '', component: DragDropComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    DragulaModule.forRoot(),\r\n    SharedModule\r\n  ],\r\n  declarations: [\r\n    DragDropComponent\r\n  ]\r\n})\r\nexport class DragDropModule { }"]}